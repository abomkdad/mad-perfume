<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MAD PARFUMEUR</title>

<!-- ================= META PIXEL ================= -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');

fbq('init', '1072283127290819');
fbq('track', 'PageView');
</script>
<noscript>
<img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1072283127290819&ev=PageView&noscript=1"/>
</noscript>
<!-- ================= END META PIXEL ================= -->

<!-- ================= TIKTOK PIXEL ================= -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject = t;
  var ttq = w[t] = w[t] || [];
  ttq.methods = ["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"];
  ttq.setAndDefer = function (t, e) {
    t[e] = function () {
      t.push([e].concat(Array.prototype.slice.call(arguments, 0)))
    }
  };
  for (var i = 0; i < ttq.methods.length; i++) {
    ttq.setAndDefer(ttq, ttq.methods[i])
  }
  ttq.load('D2D02JBC77U4ENLN9SBG');
  ttq.page();
}(window, document, 'ttq');
</script>
<!-- ================= END TIKTOK PIXEL ================= -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

<style>
:root{
  --bg:#0a0a0a;
  --card:#151515;
  --gold:#d4af37;
  --muted:#999;
  --wa:#25d366;
}
body{margin:0;background:var(--bg);font-family:Arial,sans-serif;color:#fff}
header{text-align:center;padding:18px;border-bottom:1px solid #222}
header img{height:55px}

.branch-box{
  max-width:420px;margin:18px auto;padding:18px;
  background:linear-gradient(180deg,#161616,#0f0f0f);
  border-radius:18px;border:1px solid #222;text-align:center
}
.branch-box h1{margin:0;color:var(--gold);font-size:20px}
.branch-box .hours{margin-top:8px;font-size:13px;color:var(--muted)}

.branch-links{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:14px}
.branch-links a{
  padding:8px 14px;border-radius:20px;font-size:12px;
  font-weight:bold;text-decoration:none;border:1px solid #333
}
.waze{color:#4fc3f7}
.fb{color:#1877f2}
.ig{color:#e1306c}
.tt{color:#25f4ee}

.grid{
  max-width:420px;margin:20px auto 120px;
  display:grid;grid-template-columns:repeat(2,1fr);gap:14px
}
.product{
  background:#fff;border-radius:14px;overflow:hidden;
  display:flex;flex-direction:column
}
.product img{width:100%;height:150px;object-fit:contain;background:#fff}
.product .info{padding:12px;color:#000;text-align:center}
.product .code{font-weight:bold}
.product .price{color:#b8860b;margin:6px 0;font-weight:bold}
.product a{
  display:block;background:#2ecc71;color:#fff;
  padding:8px;border-radius:8px;font-size:13px;
  text-decoration:none;font-weight:bold
}

.wa-float{
  position:fixed;bottom:20px;right:20px;
  background:var(--wa);color:#fff;
  width:60px;height:60px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:30px;box-shadow:0 10px 25px rgba(0,0,0,.45);z-index:99
}
</style>
</head>

<body>

<header>
<img src="https://drive.google.com/uc?export=view&id=1GeseZXkkTJG75Gfy9oCPeADSJl90RQG1">
</header>

<div class="branch-box">
  <h1 id="branchName">...</h1>
  <div id="branchHours" class="hours"></div>

  <div class="branch-links">
    <a id="waze" class="waze" target="_blank">üìç Waze</a>
    <a id="fb" class="fb" target="_blank">Facebook</a>
    <a id="ig" class="ig" target="_blank">Instagram</a>
    <a id="tt" class="tt" target="_blank">TikTok</a>
  </div>
</div>

<div id="products" class="grid"></div>

<a id="waFloat" class="wa-float" target="_blank"
   onclick="fbq('track','Contact');ttq.track('Contact')">üí¨</a>

<script>
const LANG =
 new URLSearchParams(location.search).get('lang') ||
 (navigator.language.startsWith('he')?'he':'ar');

document.documentElement.dir = LANG==='he'?'ltr':'rtl';
document.documentElement.lang = LANG;

const TEXT={
 ar:{check:"ÿßŸÅÿ≠ÿµ ÿßŸÑÿ™ŸàŸÅÿ±",msg:(p,b)=>`ŸÖÿ±ÿ≠ÿ®ÿßŸãÿå ŸáŸÑ ÿßŸÑÿπÿ∑ÿ± ${p} ŸÖÿ™ŸàŸÅÿ± ŸÅŸä ŸÅÿ±ÿπ ${b}ÿü`},
 he:{check:"◊ë◊ì◊ï◊ß ◊ñ◊û◊ô◊†◊ï◊™",msg:(p,b)=>`◊©◊ú◊ï◊ù, ◊î◊ê◊ù ◊î◊ë◊ï◊©◊ù ${p} ◊ñ◊û◊ô◊ü ◊ë◊°◊†◊ô◊£ ${b}?`}
};

const branchID=new URLSearchParams(location.search).get('branch');
let branchPhone="",branchName="";

Papa.parse("branches.csv",{download:true,header:true,skipEmptyLines:true,
complete:r=>{
 const b=r.data.find(x=>String(x.ID)===String(branchID));
 if(!b){document.getElementById("branchName").innerText="Branch not found";return;}

 branchName=LANG==='he'?b["ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ±ÿπ ÿπÿ®ÿ±Ÿä"]:b["ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ±ÿπ ÿπÿ±ÿ®Ÿä"];
 branchPhone=(b["WhatsApp"]||"").replace("https://wa.me/","");

 document.getElementById("branchName").innerText=branchName;
 document.getElementById("branchHours").innerHTML=
   LANG==='he'?b["ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿØŸàÿßŸÖ ÿπÿ®ÿ±Ÿä"]:b["ÿ≥ÿßÿπÿßÿ™ ÿßŸÑÿØŸàÿßŸÖ ÿπÿ±ÿ®Ÿä"];

 document.getElementById("waze").href=b["ÿ±ÿßÿ®ÿ∑ Waze / Maps"];
 document.getElementById("fb").href=b["Facebook"];
 document.getElementById("ig").href=b["Instagram"];
 document.getElementById("tt").href=b["TikTok"];
 document.getElementById("waFloat").href=`https://wa.me/${branchPhone}`;
}});

Papa.parse("products.csv",{download:true,header:true,skipEmptyLines:true,
complete:r=>{
 const box=document.getElementById("products");
 fbq('track','ViewContent');
 ttq.track('ViewContent');

 r.data.slice(0,60).forEach(p=>{
  if(!p.Title)return;
  const img=(p.Image||"").split("|")[0];
  const msg=TEXT[LANG].msg(p.Title,branchName);

  box.innerHTML+=`
   <div class="product">
    <img src="${img}">
    <div class="info">
     <div class="code">${p.Title}</div>
     <div class="price">‚Ç™ 100</div>
     <a href="https://wa.me/${branchPhone}?text=${encodeURIComponent(msg)}"
        target="_blank"
        onclick="fbq('track','Lead');ttq.track('Lead')">
       ${TEXT[LANG].check}
     </a>
    </div>
   </div>`;
 });
}});
</script>

</body>
</html>
