<!DOCTYPE html>
<html lang="auto" dir="auto">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>MAD PARFUMEUR</title>

<!-- =======================
   PERFORMANCE OPTIMIZATION
======================== -->
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

<!-- =======================
   FONT + ICONS
======================== -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- =======================
   META PIXEL
======================== -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;n=f.fbq=function(){
n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)
}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','1072283127290819');
fbq('track','PageView');
</script>

<!-- =======================
   TIKTOK PIXEL
======================== -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;
  var ttq=w[t]=w[t]||[];
  ttq.methods=["page","track","identify"];
  ttq.setAndDefer=function(t,e){
    t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}
  };
  for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);
  ttq.load=function(e){
    var i=d.createElement("script");
    i.async=!0;i.src="https://analytics.tiktok.com/i18n/pixel/events.js?sdkid="+e;
    var a=d.getElementsByTagName("script")[0];
    a.parentNode.insertBefore(i,a)
  };
  ttq.load('D2D02JBC77U4ENLN9SBG');
  ttq.page();
}(window, document, 'ttq');
</script>

<style>
:root{
--bg:#0a0a0a;
--card:#141414;
--gold:#d4af37;
--text:#ffffff;
--muted:#aaaaaa;
}

*{box-sizing:border-box}
body{
margin:0;
font-family:system-ui,-apple-system,BlinkMacSystemFont;
background:var(--bg);
color:var(--text);
}

header{
background:linear-gradient(to bottom,rgba(0,0,0,.8),rgba(0,0,0,.95)),
url('https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg') center/cover;
padding:40px 15px;
text-align:center;
}

header img{
width:90px;
margin-bottom:10px;
}

header h1{
color:var(--gold);
letter-spacing:2px;
font-size:22px;
margin:5px 0;
}

.branch{
font-size:20px;
font-weight:700;
margin:10px 0;
}

.hours{
color:var(--muted);
font-size:14px;
}

.social{
display:flex;
justify-content:center;
gap:18px;
margin-top:15px;
}

.social a{
color:var(--gold);
font-size:22px;
}

.categories{
display:flex;
overflow-x:auto;
gap:10px;
padding:15px;
}

.categories button{
background:#1c1c1c;
border:1px solid var(--gold);
color:var(--gold);
padding:8px 16px;
border-radius:20px;
cursor:pointer;
white-space:nowrap;
}

.products{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
gap:14px;
padding:15px;
}

.card{
background:var(--card);
border-radius:14px;
padding:10px;
text-align:center;
}

.card img{
width:100%;
border-radius:10px;
aspect-ratio:1/1;
object-fit:contain;
background:#fff;
}

.code{
margin:8px 0 4px;
font-weight:700;
}

.price{
color:var(--gold);
margin-bottom:8px;
}

.btn{
display:block;
background:#25D366;
color:#fff;
padding:10px;
border-radius:10px;
text-decoration:none;
font-weight:600;
}

.floating-whatsapp{
position:fixed;
bottom:20px;
right:20px;
background:#25D366;
color:#fff;
width:56px;
height:56px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:26px;
z-index:999;
}

</style>
</head>

<body>

<header>
<img src="https://abomkdad.github.io/Digital-Business-Card/logo.png" alt="MAD">
<h1>MAD PARFUMEUR</h1>
<div class="branch" id="branchName"></div>
<div class="hours" id="branchHours"></div>

<div class="social">
<a id="waze" target="_blank"><i class="fa-solid fa-location-dot"></i></a>
<a id="ig" target="_blank"><i class="fab fa-instagram"></i></a>
<a id="tt" target="_blank"><i class="fab fa-tiktok"></i></a>
<a id="fb" target="_blank"><i class="fab fa-facebook"></i></a>
</div>
</header>

<div class="categories" id="cats"></div>
<div class="products" id="products"></div>

<a class="floating-whatsapp" id="waFloat" target="_blank">
<i class="fab fa-whatsapp"></i>
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<script>
const lang = navigator.language.startsWith('he') ? 'he' : 'ar';
document.documentElement.lang = lang;
document.documentElement.dir = lang === 'he' ? 'rtl' : 'rtl';

const branchId = new URLSearchParams(location.search).get('branch') || '12';

let branchPhone='', waText='';
let products=[], categories=[];

Papa.parse('branches.csv',{
download:true,header:true,
complete:r=>{
const b=r.data.find(x=>x.ID===branchId);
if(!b)return;

branchPhone=b.phone.replace(/\D/g,'');
waText=lang==='he'?'שלום, מעוניין במוצר:':'مرحبا، مهتم بالمنتج:';

branchName.textContent=lang==='he'?b['اسم الفرع عبري']:b['اسم الفرع عربي'];
branchHours.innerHTML=lang==='he'?b['ساعات الدوام عبري']:b['ساعات الدوام عربي'];

waze.href=b['رابط Waze / Maps'];
ig.href=b.Instagram;
tt.href=b.TikTok;
fb.href=b.Facebook;
waFloat.href=b.WhatsApp;
}
});

Papa.parse('products.csv',{
download:true,header:true,skipEmptyLines:true,
complete:r=>{
products=r.data.filter(p=>p.Title);

products.forEach(p=>{
const c=p['Category (g:product_type)'];
if(c && !categories.includes(c))categories.push(c);
});

renderCats();
renderProducts();
}
});

function renderCats(){
cats.innerHTML='';
categories.forEach(c=>{
const b=document.createElement('button');
b.textContent=c;
b.onclick=()=>renderProducts(c);
cats.appendChild(b);
});
}

function renderProducts(cat=null){
productsEl=products
.filter(p=>!cat || p['Category (g:product_type)']===cat)
.slice(0,30);

productsDiv=document.getElementById('products');
productsDiv.innerHTML='';

productsEl.forEach(p=>{
productsDiv.innerHTML+=`
<div class="card">
<img src="${p.Image}" loading="lazy">
<div class="code">${p.Title}</div>
<div class="price">${p.Price} ₪</div>
<a class="btn" href="https://wa.me/${branchPhone}?text=${encodeURIComponent(waText+' '+p.Title)}">
${lang==='he'?'בדוק זמינות':'افحص التوفر'}
</a>
</div>`;
});
}
</script>

</body>
</html>
