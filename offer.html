<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MAD PARFUMEUR | Offer</title>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- CSV Parser -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

<style>
:root{
  --gold:#d4af37;
  --black:#0b0b0b;
  --dark:#111;
  --card:#fff;
  --green:#25D366;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--black);
  color:#fff;
  font-family:Arial, Helvetica, sans-serif;
}

/* ===== HERO ===== */
.hero{
  height:95px;
  background:url("https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg") center/cover;
  position:relative;
}

.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.65);
}

.hero-content{
  position:relative;
  z-index:2;
  text-align:center;
  padding-top:10px;
}

.logo{
  width:42px;
  margin-bottom:4px;
}

.brand-title{
  font-family:"Playfair Display",serif;
  font-size:12px;
  letter-spacing:3px;
  text-transform:uppercase;
  color:var(--gold);
}

.branch-title{
  font-size:22px;
  font-weight:900;
  margin-top:2px;
}

/* ===== INFO BAR ===== */
.info{
  text-align:center;
  padding:8px 10px;
  background:#0e0e0e;
}

.hours{
  font-size:13px;
  opacity:.85;
}

.social{
  margin-top:6px;
  display:flex;
  justify-content:center;
  gap:18px;
  font-size:18px;
}

.social a{color:var(--gold)}

/* ===== CATEGORIES ===== */
.categories{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:10px;
}

.cat{
  padding:6px 14px;
  border-radius:20px;
  border:1px solid #333;
  white-space:nowrap;
  cursor:pointer;
}

.cat.active{
  background:var(--gold);
  color:#000;
  font-weight:bold;
}

/* ===== PRODUCTS ===== */
.products{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:12px;
}

.card{
  background:var(--card);
  color:#000;
  border-radius:14px;
  padding:10px;
  text-align:center;
}

.card img{
  max-width:100%;
  height:160px;
  object-fit:contain;
}

.price{
  color:var(--gold);
  font-weight:bold;
  margin:6px 0;
}

.btn{
  background:var(--green);
  color:#fff;
  padding:10px;
  border-radius:10px;
  font-weight:bold;
  display:block;
}

/* ===== FLOAT WHATSAPP ===== */
.whatsapp-float{
  position:fixed;
  bottom:18px;
  right:18px;
  background:var(--green);
  color:#fff;
  width:56px;
  height:56px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:28px;
  z-index:999;
}
</style>
</head>

<body>

<div class="hero">
  <div class="hero-content">
    <img class="logo" src="https://abomkdad.github.io/Digital-Business-Card/logo.png">
    <div class="brand-title">MAD PARFUMEUR</div>
    <div class="branch-title" id="branchName">—</div>
  </div>
</div>

<div class="info">
  <div class="hours" id="hours">—</div>
  <div class="social">
    <a id="fb" target="_blank"><i class="fab fa-facebook-f"></i></a>
    <a id="ig" target="_blank"><i class="fab fa-instagram"></i></a>
    <a id="tt" target="_blank"><i class="fab fa-tiktok"></i></a>
    <a id="waze" target="_blank"><i class="fas fa-location-dot"></i></a>
  </div>
</div>

<div class="categories" id="categories"></div>

<div class="products" id="products"></div>

<a id="waFloat" class="whatsapp-float" target="_blank">
  <i class="fab fa-whatsapp"></i>
</a>

<script>
const params = new URLSearchParams(location.search);
const branchID = params.get("branch");
const lang = document.documentElement.lang.startsWith("he") ? "he" : "ar";

let BRANCH=null, PRODUCTS=[];

/* ===== LOAD BRANCH ===== */
Papa.parse("branches.csv",{
 download:true, header:true,
 complete:r=>{
   BRANCH=r.data.find(b=>b.ID===branchID);
   if(!BRANCH) return;
   document.getElementById("branchName").innerText =
     lang==="he"?BRANCH["اسم الفرع عبري"]:BRANCH["اسم الفرع عربي"];
   document.getElementById("hours").innerHTML =
     lang==="he"?BRANCH["ساعات الدوام عبري"]:BRANCH["ساعات الدوام عربي"];

   fb.href=BRANCH.Facebook;
   ig.href=BRANCH.Instagram;
   tt.href=BRANCH.TikTok;
   waze.href=BRANCH["رابط Waze / Maps"];
   waFloat.href=BRANCH.WhatsApp;
 }
});

/* ===== LOAD PRODUCTS ===== */
Papa.parse("products.csv",{
 download:true, header:true,
 complete:r=>{
   PRODUCTS=r.data.filter(p=>p.Title);
   buildCategories();
   render(PRODUCTS);
 }
});

function buildCategories(){
 const cats=[...new Set(PRODUCTS.map(p=>p.Category).filter(Boolean))];
 categories.innerHTML=`<div class="cat active" onclick="render(PRODUCTS)">הכל</div>`;
 cats.forEach(c=>{
   categories.innerHTML+=`<div class="cat" onclick="render(PRODUCTS.filter(p=>p.Category==='${c}'))">${c}</div>`;
 });
}

function render(list){
 products.innerHTML="";
 list.forEach(p=>{
   products.innerHTML+=`
   <div class="card">
     <img src="${p.Image}">
     <div>${p.Title}</div>
     <div class="price">${p.Price} ₪</div>
     <a class="btn" href="${BRANCH.WhatsApp}?text=${encodeURIComponent(p.Title)}">
       בדוק זמינות
     </a>
   </div>`;
 });
}
</script>

</body>
</html>
