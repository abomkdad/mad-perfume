<!DOCTYPE html>
<html lang="auto">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>MAD PARFUMEUR – Offer</title>

<!-- Performance -->
<link rel="preconnect" href="https://cdnjs.cloudflare.com" />
<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />

<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)
}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','1072283127290819');
fbq('track','PageView');
</script>

<!-- TikTok Pixel -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;
  var ttq=w[t]=w[t]||[];
  ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"];
  ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};
  for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);
  ttq.load=function(e,n){
    var i=d.createElement("script");
    i.type="text/javascript";i.async=!0;
    i.src="https://analytics.tiktok.com/i18n/pixel/events.js?sdkid="+e;
    var s=d.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(i,s);
  };
  ttq.load('D2D02JBC77U4ENLN9SBG');
  ttq.page();
}(window, document, 'ttq');
</script>

<style>
:root{
  --bg:#0a0a0a;
  --card:#141414;
  --gold:#d4af37;
  --text:#ffffff;
  --muted:#aaaaaa;
  --green:#25d366;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial;
  direction:rtl;
}

header{
  background:url("https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg") center/cover no-repeat;
  padding:24px 16px 20px;
  text-align:center;
}

.logo{
  width:64px;
  height:64px;
  border-radius:50%;
}

.brand{
  margin-top:10px;
  font-size:18px;
  font-weight:800;
  color:var(--gold);
  letter-spacing:2px;
}

.branch-name{
  margin-top:6px;
  font-size:22px;
  font-weight:900;
  color:var(--gold);
}

.branch-hours{
  margin-top:6px;
  font-size:14px;
  color:#ddd;
  display:flex;
  justify-content:center;
  gap:8px;
}

.socials{
  margin-top:14px;
  display:flex;
  justify-content:center;
  gap:18px;
}
.socials a{
  width:44px;height:44px;
  border-radius:50%;
  border:2px solid var(--gold);
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--gold);
  font-size:18px;
}

.categories{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:14px;
}
.categories button{
  background:transparent;
  color:var(--gold);
  border:1px solid var(--gold);
  padding:8px 14px;
  border-radius:20px;
  white-space:nowrap;
  font-weight:700;
  cursor:pointer;
}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
  padding:14px;
}

.card{
  background:var(--card);
  border-radius:14px;
  padding:10px;
  text-align:center;
}

.card img{
  width:100%;
  border-radius:10px;
  aspect-ratio:1/1;
  object-fit:contain;
}

.code{
  margin-top:6px;
  font-weight:800;
}

.price{
  margin-top:4px;
  color:var(--gold);
  font-weight:800;
}

.btn{
  margin-top:8px;
  display:block;
  background:var(--green);
  color:#fff;
  padding:10px;
  border-radius:10px;
  text-decoration:none;
  font-weight:800;
}

.whatsapp-float{
  position:fixed;
  bottom:18px;
  right:18px;
  width:58px;
  height:58px;
  background:var(--green);
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:26px;
  z-index:999;
}
</style>
</head>

<body>

<header>
  <img class="logo" src="https://abomkdad.github.io/Digital-Business-Card/logo.png" />
  <div class="brand">MAD PARFUMEUR</div>
  <div class="branch-name" id="branchName"></div>
  <div class="branch-hours"><i class="fa-regular fa-clock"></i><span id="branchHours"></span></div>

  <div class="socials">
    <a id="fb" target="_blank"><i class="fab fa-facebook-f"></i></a>
    <a id="ig" target="_blank"><i class="fab fa-instagram"></i></a>
    <a id="tt" target="_blank"><i class="fab fa-tiktok"></i></a>
    <a id="map" target="_blank"><i class="fa-solid fa-location-dot"></i></a>
  </div>
</header>

<div class="categories" id="categories"></div>
<div class="products" id="products"></div>

<a id="waFloat" class="whatsapp-float" target="_blank">
  <i class="fab fa-whatsapp"></i>
</a>

<script>
const qs=new URLSearchParams(location.search);
const branchID=qs.get("branch");

const lang=navigator.language.startsWith("he")?"he":"ar";
document.documentElement.lang=lang;
document.body.dir=lang==="he"?"rtl":"rtl";

const csvFetch=async url=>{
  const t=await fetch(url).then(r=>r.text());
  const l=t.split("\n").map(r=>r.split(","));
  const h=l.shift();
  return l.map(r=>Object.fromEntries(h.map((k,i)=>[k,r[i]])));
};

(async()=>{
  const branches=await csvFetch("branches.csv");
  const products=await csvFetch("products.csv");

  const b=branches.find(x=>x.ID===branchID);
  if(!b)return;

  document.getElementById("branchName").textContent=lang==="he"?b["اسم الفرع عبري"]:b["اسم الفرع عربي"];
  document.getElementById("branchHours").innerHTML=lang==="he"?b["ساعات الدوام عبري"]:b["ساعات الدوام عربي"];

  fb.href=b.Facebook;
  ig.href=b.Instagram;
  tt.href=b.TikTok;
  map.href=b["رابط Waze / Maps"];
  waFloat.href=b.WhatsApp;

  const cats=[];
  products.forEach(p=>{
    if(!cats.includes(p.Category))cats.push(p.Category);
  });

  const catWrap=document.getElementById("categories");
  const prodWrap=document.getElementById("products");

  const render=cat=>{
    prodWrap.innerHTML="";
    products.filter(p=>!cat||p.Category===cat).forEach(p=>{
      prodWrap.innerHTML+=`
      <div class="card">
        <img loading="lazy" src="${p.Image}" />
        <div class="code">${p.Code}</div>
        <div class="price">${p.Price} ₪</div>
        <a class="btn" href="${b.WhatsApp}?text=${encodeURIComponent(p.Code)}" target="_blank">
          ${lang==="he"?"בדוק זמינות":"افحص التوفر"}
        </a>
      </div>`;
    });
  };

  catWrap.innerHTML=`<button onclick="render()">${lang==="he"?"הכל":"الكل"}</button>`;
  cats.forEach(c=>{
    catWrap.innerHTML+=`<button onclick="render('${c}')">${c}</button>`;
  });

  window.render=render;
  render();
})();
</script>

</body>
</html>
