<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MAD PARFUMEUR – Offer</title>

<!-- ===== SEO ===== -->
<meta name="robots" content="index, follow">
<meta name="theme-color" content="#0a0a0a">

<!-- ===== Fonts ===== -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Heebo:wght@400;600;800&display=swap" rel="stylesheet">

<!-- ===== Icons ===== -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<!-- ===== CSV Parser ===== -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<!-- ===== Meta Pixel ===== -->
<script>
!function(f,b,e,v,n,t,s){
if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)
}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1072283127290819');
fbq('track', 'PageView');
</script>

<!-- ===== TikTok Pixel ===== -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;
  var ttq=w[t]=w[t]||[];
  ttq.methods=["page","track"];
  ttq.setAndDefer=function(t,e){
    t[e]=function(){
      t.push([e].concat(Array.prototype.slice.call(arguments,0)))
    }
  };
  for(var i=0;i<ttq.methods.length;i++){
    ttq.setAndDefer(ttq,ttq.methods[i])
  }
  ttq.load=function(e){
    var i="https://analytics.tiktok.com/i18n/pixel/events.js";
    ttq._i=ttq._i||{};
    ttq._i[e]=[];
    var n=d.createElement("script");
    n.type="text/javascript";
    n.async=!0;
    n.src=i+"?sdkid="+e+"&lib="+t;
    var s=d.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(n,s)
  };
  ttq.load('D2D02JBC77U4ENLN9SBG');
  ttq.page();
}(window, document, 'ttq');
</script>

<style>
:root{
  --bg:#0a0a0a;
  --card:#141414;
  --gold:#d4af37;
  --text:#ffffff;
  --muted:#aaa;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Cairo','Heebo',sans-serif;
}

header{
  background:url("https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg") center/cover no-repeat;
  padding:40px 15px 30px;
  text-align:center;
  position:relative;
}

header::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.65);
}

header *{position:relative;z-index:2}

.logo{
  width:90px;
  margin:auto;
}

.logo img{width:100%}

.brand{
  color:var(--gold);
  font-weight:800;
  letter-spacing:2px;
  margin-top:10px;
}

.branch-name{
  font-size:22px;
  font-weight:800;
  color:var(--gold);
  margin-top:8px;
}

.branch-hours{
  display:flex;
  justify-content:center;
  gap:6px;
  margin-top:6px;
  font-size:14px;
  color:#ddd;
}

.socials{
  display:flex;
  justify-content:center;
  gap:14px;
  margin-top:15px;
}

.socials a{
  width:44px;
  height:44px;
  border-radius:50%;
  border:1px solid var(--gold);
  color:var(--gold);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}

.categories{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:15px;
}

.categories button{
  background:transparent;
  color:var(--gold);
  border:1px solid var(--gold);
  border-radius:30px;
  padding:6px 14px;
  white-space:nowrap;
}

.products{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
  padding:15px;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:10px;
  text-align:center;
}

.card img{
  width:100%;
  border-radius:12px;
  background:#fff;
}

.code{margin-top:8px;font-weight:700}
.price{color:var(--gold);margin:4px 0}

.btn{
  display:block;
  background:#25D366;
  color:#fff;
  text-decoration:none;
  border-radius:30px;
  padding:8px;
  margin-top:6px;
}

.whatsapp-float{
  position:fixed;
  bottom:20px;
  right:20px;
  width:56px;
  height:56px;
  background:#25D366;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  color:#fff;
  z-index:99;
}
</style>
</head>

<body>

<header>
  <div class="logo">
    <img src="https://abomkdad.github.io/Digital-Business-Card/logo.png" alt="MAD">
  </div>
  <div class="brand">MAD PARFUMEUR</div>
  <div class="branch-name" id="branchName"></div>
  <div class="branch-hours"><i class="fa-regular fa-clock"></i><span id="branchHours"></span></div>

  <div class="socials">
    <a id="mapLink" target="_blank"><i class="fa-solid fa-location-dot"></i></a>
    <a id="tiktokLink" target="_blank"><i class="fa-brands fa-tiktok"></i></a>
    <a id="instaLink" target="_blank"><i class="fa-brands fa-instagram"></i></a>
    <a id="fbLink" target="_blank"><i class="fa-brands fa-facebook-f"></i></a>
  </div>
</header>

<div class="categories" id="categories"></div>
<div class="products" id="products"></div>

<a class="whatsapp-float" id="waFloat" target="_blank">
  <i class="fa-brands fa-whatsapp"></i>
</a>

<script>
const lang = navigator.language.startsWith("he") ? "he" : "ar";
document.documentElement.lang = lang;
document.documentElement.dir = lang==="he" ? "rtl" : "rtl";

const params = new URLSearchParams(location.search);
const branchID = params.get("branch");

let branch, products=[], categories=[];

Papa.parse("branches.csv",{
  download:true, header:true,
  complete:r=>{
    branch = r.data.find(b=>b.ID===branchID);
    if(!branch) return;

    document.getElementById("branchName").textContent =
      lang==="he" ? branch["اسم الفرع عبري"] : branch["اسم الفرع عربي"];

    document.getElementById("branchHours").innerHTML =
      lang==="he" ? branch["ساعات الدوام عبري"] : branch["ساعات الدوام عربي"];

    mapLink.href = branch["رابط Waze / Maps"];
    instaLink.href = branch["Instagram"];
    fbLink.href = branch["Facebook"];
    tiktokLink.href = branch["TikTok"];
    waFloat.href = branch["WhatsApp"];
  }
});

Papa.parse("products.csv",{
  download:true, header:true,
  complete:r=>{
    products = r.data.filter(p=>p["كود او اسم"]);
    const CAT = Object.keys(products[0]).slice(-2)[0];

    products.forEach(p=>{
      if(p[CAT] && !categories.includes(p[CAT])) categories.push(p[CAT]);
    });

    categories.forEach(c=>{
      const b=document.createElement("button");
      b.textContent=c;
      b.onclick=()=>render(c);
      categoriesDiv.appendChild(b);
    });

    render();
  }
});

const productsDiv = document.getElementById("products");
const categoriesDiv = document.getElementById("categories");

function render(cat){
  productsDiv.innerHTML="";
  products.filter(p=>!cat||p[Object.keys(p).slice(-2)[0]]===cat)
    .forEach(p=>{
      productsDiv.innerHTML+=`
      <div class="card">
        <img loading="lazy" src="${p["رابط الصوره"]}">
        <div class="code">${p["كود او اسم"]}</div>
        <div class="price">${p["السعر"]} ₪</div>
        <a class="btn" href="${branch["WhatsApp"]}?text=${encodeURIComponent(p["كود او اسم"])}" target="_blank">
          ${lang==="he"?"בדוק זמינות":"افحص التوفر"}
        </a>
      </div>`;
    });
}
</script>

</body>
</html>
