<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>MAD PARFUMEUR</title>

<!-- Performance -->
<link rel="preload" as="image" href="https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg">
<link rel="preload" as="image" href="https://abomkdad.github.io/Digital-Business-Card/logo.png">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- PapaParse -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" defer></script>

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window,document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init','1072283127290819');
fbq('track','PageView');
</script>

<!-- TikTok Pixel -->
<script>
!function(w,d,t){
w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];
ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"];
ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);
ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e};
ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";
ttq._i=ttq._i||{};ttq._i[e]=[];ttq._i[e]._u=i;ttq._t=ttq._t||{};ttq._t[e]=+new Date;
ttq._o=ttq._o||{};ttq._o[e]=n||{};var o=document.createElement("script");
o.type="text/javascript";o.async=!0;o.src=i+"?sdkid="+e+"&lib="+t;
var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
ttq.load('D2D02JBC77U4ENLN9SBG');
ttq.page();
}(window,document,'ttq');
</script>

<style>
:root{
--gold:#d4af37;
--bg:#0a0a0a;
}

body{
margin:0;
background:var(--bg);
color:#fff;
font-family:system-ui;
}

header{
background:
linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.85)),
url("https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg")
center/cover;
padding:26px 14px;
text-align:center;
}

.logo{
width:70px;
margin:auto;
}

.brand{
margin-top:8px;
color:var(--gold);
font-weight:900;
letter-spacing:3px;
text-transform:uppercase;
font-size:20px;
}

.branch{
font-size:26px;
font-weight:900;
margin-top:6px;
}

.hours{
font-size:14px;
color:#ddd;
margin-top:4px;
}

.social{
margin-top:16px;
display:flex;
justify-content:center;
gap:28px;
}

.social a{
width:56px;
height:56px;
border-radius:50%;
border:1px solid rgba(212,175,55,.5);
display:flex;
align-items:center;
justify-content:center;
color:var(--gold);
font-size:26px;
background:rgba(212,175,55,.1);
}

.categories{
display:flex;
gap:10px;
overflow-x:auto;
padding:14px;
}

.categories button{
background:#111;
border:1px solid var(--gold);
color:var(--gold);
padding:8px 16px;
border-radius:20px;
font-weight:700;
white-space:nowrap;
}

.products{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:14px;
padding:14px;
}

.card{
background:#fff;
border-radius:16px;
padding:10px;
text-align:center;
}

.card img{
width:100%;
height:160px;
object-fit:contain;
loading:lazy;
}

.code{
font-weight:800;
margin-top:6px;
}

.price{
color:var(--gold);
font-weight:800;
}

.btn{
margin-top:8px;
background:#25D366;
color:#fff;
padding:12px 0;
border-radius:12px;
font-weight:800;
display:block;
}

#waFloat{
position:fixed;
bottom:18px;
right:18px;
width:62px;
height:62px;
background:#25D366;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:32px;
color:#fff;
z-index:999;
}
</style>
</head>

<body>

<header>
<img class="logo" src="https://abomkdad.github.io/Digital-Business-Card/logo.png">
<div class="brand">MAD PARFUMEUR</div>
<div id="branchName" class="branch"></div>
<div id="branchHours" class="hours"></div>

<div class="social">
<a id="fb"><i class="fab fa-facebook-f"></i></a>
<a id="ig"><i class="fab fa-instagram"></i></a>
<a id="tt"><i class="fab fa-tiktok"></i></a>
<a id="waze"><i class="fas fa-location-dot"></i></a>
</div>
</header>

<div class="categories" id="cats"></div>
<div class="products" id="products"></div>

<a id="waFloat"><i class="fab fa-whatsapp"></i></a>

<script defer>
const lang = navigator.language.startsWith('he')?'he':'ar';
document.documentElement.dir = lang==='he'?'ltr':'rtl';

const params = new URLSearchParams(location.search);
const branchID = params.get('branch');

let branchPhone='',waText='';
let products=[],catsOrder=[];

Papa.parse('branches.csv',{download:true,header:true,complete:r=>{
const b=r.data.find(x=>x.ID==branchID);
if(!b)return;

branchPhone=b.WhatsApp.replace(/\D/g,'');
document.getElementById('branchName').textContent=lang==='he'?b['اسم الفرع عبري']:b['اسم الفرع عربي'];
document.getElementById('branchHours').innerHTML=lang==='he'?b['ساعات الدوام عبري']:b['ساعات الدوام عربي'];

document.getElementById('fb').href=b.Facebook;
document.getElementById('ig').href=b.Instagram;
document.getElementById('tt').href=b.TikTok;
document.getElementById('waze').href=b['رابط Waze / Maps'];

waText=lang==='he'
?'שלום, אשמח לפרטים'
:'مرحبا، أود الاستفسار';

document.getElementById('waFloat').href=
`https://wa.me/${branchPhone}?text=${encodeURIComponent(waText)}`;
}});

Papa.parse('products.csv',{download:true,header:true,complete:r=>{
products=r.data.filter(p=>p.Title);
products.forEach(p=>{
if(!catsOrder.includes(p.Category))catsOrder.push(p.Category);
});
renderCats();
renderProducts();
}});

function renderCats(){
const c=document.getElementById('cats');
catsOrder.forEach(cat=>{
const b=document.createElement('button');
b.textContent=cat;
b.onclick=()=>renderProducts(cat);
c.appendChild(b);
});
}

function renderProducts(cat){
const g=document.getElementById('products');
g.innerHTML='';
products.filter(p=>!cat||p.Category===cat).slice(0,24).forEach(p=>{
g.innerHTML+=`
<div class="card">
<img src="${p.Image}">
<div class="code">${p.Title}</div>
<div class="price">${p.Price} ₪</div>
<a class="btn" href="https://wa.me/${branchPhone}?text=${encodeURIComponent(waText+' '+p.Title)}">
${lang==='he'?'בדוק זמינות':'افحص التوفر'}
</a>
</div>`;
});
}
</script>

</body>
</html>
