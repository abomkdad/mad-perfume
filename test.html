<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAD PARFUMEUR | Official Portal</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init','1072283127290819'); fbq('track','PageView');
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;800&family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --mad-gold: #c5a059;
            --mad-dark: #1c1c1c;
            --soft-bg: #fbfbfb; /* خلفية ناعمة جدا مريحة للموبايل */
            --wa-color: #25D366;
            --waze-color: #33CCFF;
            --card-shadow: 0 10px 25px rgba(0,0,0,0.06);
            --inner-shadow: inset 0 2px 4px rgba(255,255,255,0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--soft-bg); 
            color: var(--mad-dark); 
            font-family: 'Assistant', 'Cairo', sans-serif; 
            direction: rtl; 
            padding-bottom: 110px;
        }

        header {
            background: linear-gradient(135deg, rgba(0,0,0,0.85) 0%, rgba(28,28,28,0.95) 100%), 
                        url('https://madparfumeurglobal.com/wp-content/uploads/2025/10/1920x600-BERGAY.jpg') center/cover;
            padding: 50px 20px 80px; 
            text-align: center; 
            border-bottom: 4px solid var(--mad-gold);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .logo img { 
            width: 100px; 
            filter: drop-shadow(0 4px 10px rgba(197,160,89,0.5)); 
            margin-bottom: 15px;
        }

        .brand-name { 
            font-size: 24px; 
            font-weight: 900; 
            margin-bottom: 30px; 
            color: #fff; 
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .social-bar { 
            display: flex; 
            justify-content: center; 
            gap: 12px; 
            margin-bottom: 35px; 
        }

        .social-bar a {
            color: #fff; 
            font-size: 18px; 
            width: 44px; 
            height: 44px;
            background: rgba(255,255,255,0.1); 
            border-radius: 14px; /* زوايا أنعم */
            display: flex; 
            align-items: center; 
            justify-content: center;
            border: 1px solid rgba(197,160,89,0.4); 
            text-decoration: none;
            backdrop-filter: blur(5px);
            transition: 0.3s;
        }

        /* Action Grid - تصميم أزرار الموبايل الحديثة */
        .action-grid {
            display: grid; 
            grid-template-columns: 1fr 1fr;
            gap: 12px; 
            max-width: 500px; 
            margin: 0 auto;
        }

        .action-item {
            background: #fff; 
            border: none;
            padding: 18px 10px; 
            border-radius: 20px; 
            text-decoration: none; 
            color: var(--mad-dark);
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s;
        }

        .action-item:active { transform: scale(0.96); }

        .action-item i { font-size: 24px; color: var(--mad-gold); margin-bottom: 8px; }
        .action-item span { font-size: 14px; font-weight: 800; color: #444; }
        .action-item .hotline { font-size: 16px; color: var(--mad-gold); font-weight: 900; margin-top: 4px; }

        .agent-special { 
            background: linear-gradient(135deg, #fffcf0 0%, #fff 100%);
            border: 1px solid rgba(197,160,89,0.3);
        }

        .container { max-width: 800px; margin: -40px auto 50px; padding: 0 15px; position: relative; z-index: 5; }
        
        .branch-card {
            background: #fff; 
            border-radius: 25px; 
            padding: 25px;
            margin-bottom: 22px; 
            border: 1px solid rgba(0,0,0,0.03);
            box-shadow: var(--card-shadow);
            border-right: 8px solid var(--mad-gold); /* شريط جانبي عريض وفخم */
        }

        .br-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 20px; 
        }

        .br-title { font-size: 21px; font-weight: 800; color: #1a1a1a; }

        .status-pill { 
            font-size: 12px; 
            padding: 6px 14px; 
            border-radius: 50px; 
            font-weight: 800; 
            display: flex; 
            align-items: center; 
            gap: 6px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .btn-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

        .btn {
            padding: 15px 5px; 
            border-radius: 18px; 
            text-decoration: none; 
            color: white;
            font-weight: 800; 
            font-size: 13px; 
            text-align: center;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 6px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .bg-wa { background: linear-gradient(135deg, #25D366, #1ca34d); }
        .bg-waze { background: linear-gradient(135deg, #33CCFF, #29a8d4); color: #fff; }
        .bg-enter { background: linear-gradient(135deg, #222, #000); color: var(--mad-gold); border: 1px solid var(--mad-gold); }

        /* Sticky Fragrantica - نسخة مودرن */
        .sticky-fragrantica {
            position: fixed; 
            bottom: 0; 
            left: 0; 
            width: 100%;
            background: rgba(255,255,255,0.95); 
            backdrop-filter: blur(15px);
            border-top: 2px solid var(--mad-gold);
            padding: 18px 20px; 
            display: flex; 
            justify-content: space-between;
            align-items: center; 
            z-index: 1000; 
            box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }

        .sticky-fragrantica h5 { color: var(--mad-gold); font-size: 16px; font-weight: 900; }
        .sticky-fragrantica p { font-size: 12px; color: #666; font-weight: 600; }
        
        .open-frag-btn { 
            background: var(--mad-gold); 
            color: #fff; 
            padding: 12px 24px; 
            border-radius: 50px; 
            font-weight: 900; 
            border: none; 
            box-shadow: 0 6px 15px rgba(197,160,89,0.3);
        }

        /* Modal Gateway */
        #gateway-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); z-index: 10000; align-items: center; justify-content: center;
        }
        .gateway-card {
            background: #fff; width: 92%; max-width: 400px;
            padding: 40px 25px; border-radius: 40px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

<header>
    <div class="logo"><img src="https://abomkdad.github.io/Digital-Business-Card/logo.png" alt="MAD Logo"></div>
    <div class="brand-name">MAD PARFUMEUR ISRAEL</div>

    <div class="social-bar">
        <a href="https://www.facebook.com/MADPARFUMEURISRAEL/"><i class="fab fa-facebook-f"></i></a>
        <a href="https://www.instagram.com/perfume.mad/"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@mad.perfume"><i class="fab fa-tiktok"></i></a>
        <a href="https://snapchat.com/t/jbtN32Xe"><i class="fab fa-snapchat"></i></a>
    </div>

    <div class="action-grid">
        <a href="tel:*9935" class="action-item">
            <i class="fas fa-phone-alt"></i>
            <span class="l-cs"></span>
            <div class="hotline">*9935</div>
        </a>
        <a id="wa-corp-btn" href="#" class="action-item">
            <i class="fab fa-whatsapp"></i>
            <span class="l-wa"></span>
            <div class="hotline" style="font-size:12px">MAD Official</div>
        </a>
        <a id="online-btn" href="#" class="action-item">
            <i class="fas fa-shopping-bag"></i>
            <span class="l-shop"></span>
            <div class="hotline" style="font-size:12px">Shop Online</div>
        </a>
        <a id="new-agent-btn" href="#" class="action-item agent-special">
            <i class="fas fa-handshake"></i>
            <span class="l-agent"></span>
            <div class="hotline" style="font-size:12px">Join MAD</div>
        </a>
    </div>
</header>

<div class="container">
    <div id="branchesList"></div>
</div>

<div class="sticky-fragrantica">
    <div style="text-align:right;">
        <h5 id="s-title"></h5>
        <p id="s-desc"></p>
    </div>
    <button class="open-frag-btn" onclick="toggleGateway(true)" id="s-btn"></button>
</div>

<div id="gateway-modal">
    <div class="gateway-card">
        <div id="content-ar" style="display:none;">
            <h2 style="color:var(--mad-gold); margin-bottom:15px; font-weight:900;">الأعلى تقييماً عالمياً</h2>
            <p style="margin-bottom:25px; line-height:1.6; color:#555;">اكتشف لماذا تُعد <b>MAD</b> الدار الأكبر والأكثر تقييماً في موسوعة <b>Fragrantica</b> العالمية.</p>
            <div style="color:var(--mad-gold); font-size:24px; margin-bottom:25px;">★★★★★</div>
            <button class="open-frag-btn" style="width:100%; margin-bottom:12px;" onclick="openFragranticaDirect()">استكشف عطورنا الأصلية</button>
            <button onclick="toggleGateway(false)" style="background:none; border:none; color:#888; font-weight:700;">العودة للموقع</button>
        </div>
        <div id="content-he" style="display:none;">
            <h2 style="color:var(--mad-gold); margin-bottom:15px; font-weight:900;">המותג המדורג ביותר בעולם</h2>
            <p style="margin-bottom:25px; line-height:1.6; color:#555;">גלו למה <b>MAD</b> היא החברה המובילה בעולם עם הדירוגים הגבוהים ביותר ב-<b>Fragrantica</b>.</p>
            <div style="color:var(--mad-gold); font-size:24px; margin-bottom:25px;">★★★★★</div>
            <button class="open-frag-btn" style="width:100%; margin-bottom:12px;" onclick="openFragranticaDirect()">לצפייה בבשמים המקוריים</button>
            <button onclick="toggleGateway(false)" style="background:none; border:none; color:#888; font-weight:700;">חזרה לאתר</button>
        </div>
    </div>
</div>

<script>
    const userLang = navigator.language.startsWith("he") ? "he" : "ar";
    const CORPORATE_WA = "0509787730";
    document.documentElement.lang = userLang;

    const t = {
        ar: { 
            cs:"خدمة الزبائن", wa:"واتساب الشركة", shop:"الطلب أونلاين", agent:"وكيل جديد",
            open:"مفتوح الآن", closed:"مغلق حالياً", enter:"دخول الفرع", wa_btn:"واتساب", 
            s_h:"MAD: الصدارة العالمية", s_p:"أكبر دار نيش تقييماً في Fragrantica", s_b:"استكشف",
            agent_msg: "أرغب في الحصول على تفاصيل حول الانضمام كوكيل جديد لـ MAD"
        },
        he: { 
            cs:"שירות לקוחות", wa:"וואטסאפ חברה", shop:"הזמנה אונליין", agent:"סוכן חדש",
            open:"פתוח עכשיו", closed:"סגור כעת", enter:"כניסה לסניף", wa_btn:"וואטסאפ", 
            s_h:"MAD: המובילה בעולם", s_p:"המותג המדורג ביותר ב-Fragrantica", s_b:"גלה עכשיו",
            agent_msg: "אני מעוניין לקבל פרטים על הצטרפות כסוכן חדש של MAD"
        }
    }[userLang];

    document.getElementById('s-title').textContent = t.s_h;
    document.getElementById('s-desc').textContent = t.s_p;
    document.getElementById('s-btn').textContent = t.s_b;
    document.querySelector('.l-cs').textContent = t.cs;
    document.querySelector('.l-wa').textContent = t.wa;
    document.querySelector('.l-shop').textContent = t.shop;
    document.querySelector('.l-agent').textContent = t.agent;
    document.getElementById(`content-${userLang}`).style.display = 'block';

    function toggleGateway(show) {
        document.getElementById('gateway-modal').style.display = show ? 'flex' : 'none';
    }

    function openFragranticaDirect() {
        const url = (userLang === "he") ? "https://www.fragrantica.co.il/designers/Mad-Parfumeur.html" : "https://www.fragranticarabia.com/designers/Mad-Parfumeur.html";
        window.open(url, '_blank');
    }

    function buildWaUrl(phone, msg = "") {
        let p = phone.replace(/\D/g, ''); 
        if (p.startsWith('0')) p = '972' + p.substring(1);
        return `https://api.whatsapp.com/send/?phone=${p}${msg ? '&text=' + encodeURIComponent(msg) : ''}`;
    }

    document.getElementById('wa-corp-btn').href = buildWaUrl(CORPORATE_WA);
    document.getElementById('new-agent-btn').href = buildWaUrl(CORPORATE_WA, t.agent_msg);
    document.getElementById('online-btn').href = (userLang === "he") ? "https://madperfume.co.il" : "https://madperfume.ps";

    function isBranchOpen(b) {
        const now = new Date();
        const days = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
        const today = days[now.getDay()];
        const currentTime = now.getHours() * 60 + now.getMinutes();
        if (!b.schedule || !b.schedule[today]) return false;
        return b.schedule[today].some(r => {
            const [sH, sM] = r[0].split(':').map(Number);
            const [eH, eM] = r[1].split(':').map(Number);
            return currentTime >= (sH * 60 + sM) && currentTime < (eH * 60 + eM);
        });
    }

    async function init() {
        const container = document.getElementById('branchesList');
        try {
            const res = await fetch('branches.json?v=' + Date.now());
            const data = await res.json();
            let html = '';
            data.branches.forEach(b => {
                const open = isBranchOpen(b);
                html += `
                    <div class="branch-card">
                        <div class="br-header">
                            <div class="br-title">${b[`name_${userLang}`]}</div>
                            <div class="status-pill" style="background:${open ? '#e8f5e9' : '#ffebee'}; color:${open ? '#2e7d32' : '#c62828'}">
                                ● ${open ? t.open : t.closed}
                            </div>
                        </div>
                        <div class="btn-group">
                            <a href="${buildWaUrl(b.phone)}" class="btn bg-wa"><i class="fab fa-whatsapp"></i>${t.wa_btn}</a>
                            <a href="https://ul.waze.com/ul?ll=${b.lat},${b.lng}&navigate=yes" target="_blank" class="btn bg-waze"><i class="fab fa-waze"></i>Waze</a>
                            <a href="offer.html?branch=${b.id}" class="btn bg-enter"><i class="fas fa-gift"></i>${t.enter}</a>
                        </div>
                    </div>`;
            });
            container.innerHTML = html;
        } catch(e) { container.innerHTML = 'Error loading branches.'; }
    }
    init();
</script>
</body>
</html>
