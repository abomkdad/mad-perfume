<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MAD | Smart WhatsApp</title>
  <meta name="robots" content="noindex,nofollow">
  <style>
    :root{ --bg:#0b0b0f; --card:#12121a; --txt:#fff; --muted:rgba(255,255,255,.72); --gold:#d7b56d; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Arial; background:radial-gradient(1000px 700px at 20% 0%, #1a1722 0%, var(--bg) 65%); color:var(--txt)}
    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:22px}
    .card{width:min(980px,100%);background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.08); border-radius:18px; overflow:hidden; box-shadow:0 18px 60px rgba(0,0,0,.45)}
    .top{display:flex;gap:18px; padding:18px; align-items:center; border-bottom:1px solid rgba(255,255,255,.08)}
    .logo{font-weight:900; letter-spacing:.5px}
    .pill{margin-inline-start:auto; padding:8px 12px;border:1px solid rgba(255,255,255,.14); border-radius:999px; color:var(--muted); font-size:13px}
    .grid{display:grid; grid-template-columns: 1.1fr .9fr; gap:18px; padding:18px}
    @media(max-width:860px){ .grid{grid-template-columns:1fr} .pill{margin-inline-start:0} }
    .hero{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); border-radius:16px; overflow:hidden}
    .hero img{width:100%; height:auto; display:block; background:#000}
    .content{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:16px}
    h1{margin:0 0 10px; font-size:22px}
    .muted{color:var(--muted); font-size:14px; line-height:1.6}
    .box{margin-top:12px; padding:12px; border:1px dashed rgba(255,255,255,.18); border-radius:14px; background:rgba(0,0,0,.18)}
    textarea{width:100%; min-height:170px; padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.25); color:#fff; font-size:14px; line-height:1.6; resize:vertical}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn{display:inline-flex; align-items:center; justify-content:center; gap:10px; padding:14px 16px; border-radius:14px;
      text-decoration:none; font-weight:900; cursor:pointer; border:1px solid rgba(255,255,255,.12)}
    .btnPrimary{background:#ffffff; color:#111}
    .btnGhost{background:transparent; color:#fff}
    .note{margin-top:10px; font-size:12px; color:rgba(255,255,255,.6)}
    .gold{color:var(--gold); font-weight:800}
    .small{font-size:12px; opacity:.7}
  </style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <div class="top">
      <div class="logo">MAD PARFUMEUR</div>
      <div class="pill" id="pill">Smart Link</div>
    </div>

    <div class="grid">
      <div class="hero">
        <img id="heroImg" alt="Offer" />
      </div>

      <div class="content">
        <h1 id="title">ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨â€¦</h1>
        <div class="muted" id="subtitle">Ù†Ø¬Ù‡Ù‘Ø² Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„ØªÙ…Ø¨Ù„Øª.</div>

        <div class="box">
          <div class="small">ğŸ“© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© (ØªÙ‚Ø¯Ø± ØªØ¹Ø¯Ù‘Ù„Ù‡Ø§ Ø¥Ø°Ø§ Ø¨Ø¯Ùƒ):</div>
          <textarea id="msg"></textarea>
        </div>

        <div class="row">
          <button class="btn btnPrimary" id="openBtn">ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨</button>
          <button class="btn btnGhost" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        </div>

        <div class="note" id="note"></div>
      </div>
    </div>
  </div>
</div>

<script>
/**
 * âœ… SMART TEMPLATE DEFINITIONS
 * t = template key in URL (?t=valentine)
 * img = template image (default) â€” can be overridden by ?img=
 * text = per language
 */
const TEMPLATES = {
  valentine: {
    name: { ar: "Ø¹Ø±Ø¶ Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø¨", he: "××‘×¦×¢ ×•×œ× ×˜×™×™×Ÿ" },
    img: "https://www.mad-parfumeur.com/assets/hero/valentine.webp",
    text: {
      ar:
"Ø¹Ø±Ø¶ Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø¨ Ù…Ù† MAD Parfumeur\n" +
"5 Ø¹Ø·ÙˆØ± ÙØ§Ø®Ø±Ø© + Ø§Ù„Ø¹Ø·Ø± Ø§Ù„Ø³Ø§Ø¯Ø³ Ù‡Ø¯ÙŠØ©\n\n" +
"ØªØ´ÙƒÙŠÙ„Ø© Ù†Ø³Ø§Ø¦ÙŠØ© ÙˆØ±Ø¬Ø§Ù„ÙŠØ© Ø±Ø§Ù‚ÙŠØ©\n" +
"ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚\n" +
"Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…\n\n" +
"Ø§Ù„Ø³Ø¹Ø±: 500â‚ª Ø´Ø§Ù…Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„\n" +
"ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø·ÙˆØ± Ø£Ø®Ø±Ù‰ Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙƒ â€” ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø§Ù„Ø¢Ù†",
      he:
"××‘×¦×¢ ×•×œ× ×˜×™×™×Ÿ ×-MAD Parfumeur\n" +
"5 ×‘×©××™× ×™×•×§×¨×ª×™×™× + ×”×‘×•×©× ×”×©×™×©×™ ××ª× ×”\n\n" +
"×§×•×œ×§×¦×™×” × ×©×™×ª ×•×’×‘×¨×™×ª ×™×•×§×¨×ª×™×ª\n" +
"××©×œ×•×— ××”×™×¨ ×œ×›×œ ×”××¨×¥\n" +
"×ª×©×œ×•× ×‘××–×•××Ÿ ×‘×§×‘×œ×”\n\n" +
"××—×™×¨: 500â‚ª ×›×•×œ×œ ××©×œ×•×—\n" +
"× ×™×ª×Ÿ ×œ×‘×—×•×¨ ×‘×©××™× ××—×¨×™× ×œ×¤×™ ×‘×§×©×” â€” ×¦×¨×• ×§×©×¨ ×¢×›×©×™×•"
    }
  },

  // ØªÙ‚Ø¯Ø± ØªØ¶ÙŠÙ ØªÙ…Ø¨Ù„ØªØ§Øª Ø«Ø§Ù†ÙŠØ© Ù‡Ù†Ø§:
  // summer: { ... }
};

function qs(name, def=null){
  const u = new URL(location.href);
  return u.searchParams.get(name) ?? def;
}

function detectLang(){
  // 1) URL param
  const p = (qs("lang","") || "").toLowerCase();
  if (p === "ar" || p === "he") return p;

  // 2) device language
  const nav = (navigator.language || "").toLowerCase();
  if (nav.startsWith("he")) return "he";
  return "ar"; // default
}

function setDirLang(lang){
  document.documentElement.lang = lang;
  document.documentElement.dir = (lang === "he") ? "ltr" : "rtl";
}

function buildWhatsAppUrl(phone, msg){
  // âœ… safer than wa.me for redirects
  return "https://api.whatsapp.com/send?phone=" + encodeURIComponent(phone) +
         "&text=" + encodeURIComponent(msg);
}

(function init(){
  const phone = (qs("phone","972509787730") || "").replace(/[^0-9]/g,'');
  const tKey = (qs("t","valentine") || "valentine").toLowerCase();
  const lang = detectLang();
  setDirLang(lang);

  const t = TEMPLATES[tKey] || TEMPLATES.valentine;

  // image: from ?img= or from template default
  const img = qs("img", t.img);
  const heroImg = document.getElementById("heroImg");
  heroImg.src = img;
  heroImg.onerror = () => { heroImg.style.display="none"; };

  // title/subtitle
  const title = document.getElementById("title");
  const subtitle = document.getElementById("subtitle");
  title.textContent = (lang === "he") ? "××¢×‘×™×¨×™× ×œ×•×•××˜×¡××¤â€¦" : "ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨â€¦";
  subtitle.textContent = (lang === "he")
    ? ("×ª×‘× ×™×ª: " + (t.name.he || tKey) + " | ×˜×œ×¤×•×Ÿ: " + phone)
    : ("Ø§Ù„ØªÙ…Ø¨Ù„Øª: " + (t.name.ar || tKey) + " | Ø§Ù„Ø±Ù‚Ù…: " + phone);

  // message (can be overridden by ?text=)
  const overrideText = qs("text", null);
  const msg = overrideText ? decodeURIComponent(overrideText) : (t.text[lang] || t.text.ar);
  const msgEl = document.getElementById("msg");
  msgEl.value = msg;

  // pill
  document.getElementById("pill").textContent =
    "t=" + tKey + " â€¢ lang=" + lang + " â€¢ phone=" + phone;

  // buttons
  const openBtn = document.getElementById("openBtn");
  const copyBtn = document.getElementById("copyBtn");

  openBtn.textContent = (lang === "he") ? "×¤×ª×— ×•×•××˜×¡××¤" : "ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨";
  copyBtn.textContent = (lang === "he") ? "×”×¢×ª×§ ×”×•×“×¢×”" : "Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©";

  openBtn.onclick = () => {
    const url = buildWhatsAppUrl(phone, msgEl.value);
    window.location.href = url; // redirect to whatsapp
  };

  copyBtn.onclick = async () => {
    try{
      await navigator.clipboard.writeText(msgEl.value);
      document.getElementById("note").innerHTML =
        (lang === "he") ? "âœ… ×”×”×•×“×¢×” ×”×•×¢×ª×§×”" : "âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø³Ø§Ù„Ø©";
    }catch(e){
      document.getElementById("note").innerHTML =
        (lang === "he") ? "Ø§Ù†Ø³Ø® ×™×“× ×™×ª ××”×ª×™×‘×”" : "Ø§Ù†Ø³Ø® ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù…Ù† Ø§Ù„Ù…Ø±Ø¨Ø¹";
    }
  };

  // optional auto-open (if ?auto=1)
  const auto = qs("auto","0");
  if (auto === "1") {
    setTimeout(() => openBtn.click(), 350);
  }

  // footer note
  document.getElementById("note").innerHTML =
    (lang === "he")
      ? 'ğŸ’¡ ×˜×™×¤: ××¤×©×¨ ×œ×©× ×•×ª ×©×¤×” ×¢× <span class="gold">?lang=he</span> ××• <span class="gold">?lang=ar</span> ×•×œ×”×—×œ×™×£ ×ª×‘× ×™×ª ×¢× <span class="gold">?t=valentine</span>.'
      : 'ğŸ’¡ ØªÙ„Ù…ÙŠØ­: ØºÙŠÙ‘Ø± Ø§Ù„Ù„ØºØ© Ø¹Ø¨Ø± <span class="gold">?lang=ar</span> Ø£Ùˆ <span class="gold">?lang=he</span> ÙˆØºÙŠÙ‘Ø± Ø§Ù„ØªÙ…Ø¨Ù„Øª Ø¹Ø¨Ø± <span class="gold">?t=valentine</span>.';
})();
</script>
</body>
</html>
