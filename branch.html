<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Branch Details</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700&family=Tajawal:wght@300;500;800&display=swap" rel="stylesheet">
    <style>
        :root { --bg-main: #000000; --gold-text: #D4AF37; --text-primary: #FFFFFF; --whatsapp-color: #25D366; --gold-gradient: linear-gradient(135deg, #BF953F, #FBF5B7, #AA771C); }
        body { background-color: var(--bg-main); font-family: 'Cairo', 'Tajawal', sans-serif; color: var(--text-primary); margin: 0; padding-bottom: 50px; }
        
        /* Hero Section */
        .branch-hero { position: relative; height: 300px; width: 100%; }
        .branch-hero-img { width: 100%; height: 100%; object-fit: cover; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(to top, #000 10%, transparent); }
        
        .back-btn { 
            position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.6); color: #fff; 
            padding: 8px 15px; border-radius: 20px; text-decoration: none; border: 1px solid #444; backdrop-filter: blur(5px);
        }
        html[dir="ltr"] .back-btn { left: 20px; right: auto; }

        .container { padding: 20px; max-width: 800px; margin: -50px auto 0; position: relative; z-index: 2; }
        
        .branch-title { font-size: 2rem; font-weight: 800; color: var(--gold-text); text-align: center; margin-bottom: 20px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        
        .info-card { background: #111; border: 1px solid #333; border-radius: 15px; padding: 20px; margin-bottom: 15px; }
        .section-title { font-size: 0.9rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        .text-content { font-size: 1.1rem; line-height: 1.6; }

        /* Action Buttons */
        .actions-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px; }
        .btn { padding: 12px; border-radius: 10px; text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 5px; font-weight: bold; transition: 0.2s; font-size: 0.9rem; color: #fff; border: none; }
        .btn-waze { background: #1a1a1a; color: #33ccff; border: 1px solid #333; }
        .btn-call { background: var(--gold-gradient); color: #000; }
        .btn-whatsapp { background: var(--whatsapp-color); }
        .btn i { font-size: 1.4rem; font-style: normal; }

        /* Social Media */
        .social-links { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .social-icon { width: 50px; height: 50px; background: #222; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--gold-text); text-decoration: none; font-size: 1.5rem; transition: 0.3s; border: 1px solid #333; }
        .social-icon:hover { background: var(--gold-text); color: #000; transform: translateY(-3px); }

    </style>
</head>
<body>

    <div class="branch-hero">
        <img id="bImg" src="" class="branch-hero-img">
        <div class="hero-overlay"></div>
        <a href="index.html" class="back-btn" id="backBtn">â¬… Back</a>
    </div>

    <div class="container">
        <h1 id="bName" class="branch-title">...</h1>

        <div class="info-card">
            <div class="section-title" id="lblDesc">Description</div>
            <div id="bDesc" class="text-content">...</div>
        </div>

        <div class="info-card">
            <div class="section-title" id="lblHours">Hours</div>
            <div id="bHours" class="text-content">...</div>
        </div>

        <div class="actions-grid">
            <a id="btnCall" href="#" class="btn btn-call">
                <i>ðŸ“ž</i> <span id="txtCall">Call</span>
            </a>
            <a id="btnWa" href="#" target="_blank" class="btn btn-whatsapp">
                <i style="display:flex"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12.031 6.172c-3.181 0-5.767 2.586-5.768 5.766-.001 1.298.38 2.27 1.019 3.287l-.711 2.592 2.654-.698c1.005.572 1.903.87 3.05.87 3.183 0 5.77-2.587 5.769-5.766.001-3.182-2.585-5.769-5.769-5.769zm9.278 4.664c0-2.327-.905-4.514-2.551-6.16C17.111 3.03 14.925 2.124 12.6 2.124c-5.775 0-10.475 4.7-10.476 10.475 0 1.846.481 3.612 1.396 5.2l-1.486 5.426 5.556-1.458c1.527.832 3.25 1.272 4.98 1.272h.005c5.775 0 10.476-4.7 10.477-10.476 0-2.793-1.087-5.419-2.742-7.07z"/></svg></i>
                <span id="txtWa">WhatsApp</span>
            </a>
            <a id="btnWaze" href="#" target="_blank" class="btn btn-waze">
                <i>â†—</i> <span id="txtWaze">Waze</span>
            </a>
        </div>

        <div class="social-links">
            <a id="linkFb" href="#" target="_blank" class="social-icon">f</a>
            <a id="linkInsta" href="#" target="_blank" class="social-icon">ðŸ“¸</a>
            <a id="linkTiktok" href="#" target="_blank" class="social-icon">ðŸŽµ</a>
        </div>
    </div>

  <script src="data.js"></script>
    
    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const lang = params.get('lang') || 'ar';

        document.documentElement.lang = lang;
        document.documentElement.dir = uiText[lang].dir;
        
        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø«Ø§Ø¨ØªØ©
        document.getElementById('backBtn').innerText = uiText[lang].backBtn;
        document.getElementById('lblDesc').innerText = uiText[lang].descriptionTitle;
        document.getElementById('lblHours').innerText = uiText[lang].hoursTitle;
        document.getElementById('txtCall').innerText = uiText[lang].call;
        document.getElementById('txtWa').innerText = uiText[lang].whatsapp;
        document.getElementById('txtWaze').innerText = uiText[lang].waze;

        const branch = branchesData.find(b => b.id == id);

        if (branch) {
            const name = lang === 'he' ? branch.nameHe : branch.nameAr;
            // ÙˆØµÙ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            const defaultDesc = lang === 'he' ? `×‘×¨×•×›×™× ×”×‘××™× ×œ×¡× ×™×£ ${name} ×©×œ MAD PARFUMEUR` : `Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ ÙØ±Ø¹ ${name} Ù…Ù† MAD PARFUMEUR`;
            const desc = lang === 'he' ? (branch.descHe || defaultDesc) : (branch.descAr || defaultDesc);
            const hours = lang === 'he' ? branch.hoursHe : branch.hoursAr;
            
            const index = branchesData.indexOf(branch);
            document.getElementById('bImg').src = getBranchImage(index);

            document.getElementById('bName').innerText = name;
            document.getElementById('bDesc').innerText = desc;
            document.getElementById('bHours').innerText = hours;

            // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
            document.getElementById('btnCall').href = `tel:${branch.phone}`;
            
            let wazeLink = branch.directLink || `https://waze.com/ul?q=${encodeURIComponent(branch.waze || name)}&navigate=yes`;
            document.getElementById('btnWaze').href = wazeLink;

            let waNum = formatPhoneForWhatsapp(branch.phone);
            document.getElementById('btnWa').href = `https://wa.me/${waNum}`;

            // --- Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ø°ÙƒÙŠ Ù…Ø¹ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„ Ù…ÙŠØ¯ÙŠØ§ ---
            
            // 1. ÙÙŠØ³Ø¨ÙˆÙƒ: Ø§Ø³ØªØ®Ø¯Ù… Ø±Ø§Ø¨Ø· Ø§Ù„ÙØ±Ø¹ØŒ ÙˆØ¥Ø°Ø§ Ù„Ù… ÙŠÙˆØ¬Ø¯ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
            const fbLink = branch.facebook && branch.facebook.length > 5 ? branch.facebook : mainSocial.facebook;
            document.getElementById('linkFb').href = fbLink;

            // 2. Ø§Ù†Ø³ØªØºØ±Ø§Ù…
            const instaLink = branch.instagram && branch.instagram.length > 5 ? branch.instagram : mainSocial.instagram;
            document.getElementById('linkInsta').href = instaLink;

            // 3. ØªÙŠÙƒ ØªÙˆÙƒ
            const tiktokLink = branch.tiktok && branch.tiktok.length > 5 ? branch.tiktok : mainSocial.tiktok;
            document.getElementById('linkTiktok').href = tiktokLink;

        } else {
            document.body.innerHTML = "<h2 style='text-align:center;color:white;margin-top:50px'>Branch Not Found</h2>";
        }
    </script>
</body>
</html>
