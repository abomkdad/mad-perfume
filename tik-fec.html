<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>MAD PARFUMEUR | Official Elite Portal</title>

<!-- Fonts (non blocking) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Assistant:wght@400;700&family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<!-- Font Awesome (deferred) -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      media="print" onload="this.media='all'">

<!-- Preload LCP image -->
<link rel="preload" as="image" href="header.webp" fetchpriority="high">

<style>
:root {
  --gold:#D4AF37; --black:#080808; --card:#121212;
  --wa:#25D366; --live-red:#ff4444;
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
body{
  background:var(--black);color:#fff;
  font-family:'Assistant','Cairo',sans-serif;
  overflow-x:hidden;padding-bottom:120px;
}

/* Top Bars */
.top-wa-bar{
  background:var(--wa);color:#fff;text-align:center;
  padding:12px;font-weight:900;text-decoration:none;
  display:flex;align-items:center;justify-content:center;
  gap:10px;position:sticky;top:0;z-index:2001
}
.agent-button{
  background:linear-gradient(45deg,#1a1a1a,#333);
  color:var(--gold);text-align:center;
  padding:15px;margin:10px 15px;border-radius:12px;
  border:1.5px solid var(--gold);
  text-decoration:none;display:flex;
  align-items:center;justify-content:center;gap:15px;
  font-weight:700
}

/* Header (LCP optimized) */
header{
  text-align:center;padding:40px 20px;
  background:
   linear-gradient(rgba(0,0,0,.8),#000),
   url('header.webp') center/cover no-repeat;
  border-bottom:2px solid var(--gold)
}
.logo-img{max-width:120px;margin-bottom:20px}
.staff-wrapper{width:100px;height:100px;margin:0 auto 15px}
.staff-img{
  width:100%;height:100%;border-radius:50%;
  border:3px solid var(--gold);object-fit:cover
}

/* Social */
.social-bar{display:flex;justify-content:center;gap:15px;margin:20px 0}
.social-bar a{
  width:45px;height:45px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,.1);color:#fff;
  border:1px solid rgba(255,255,255,.2)
}

/* Action */
.action-grid{
  display:grid;grid-template-columns:1fr 1fr;
  gap:12px;max-width:400px;margin:0 auto
}
.action-item{
  background:rgba(0,0,0,.6);
  border:1px solid rgba(212,175,55,.3);
  padding:15px;border-radius:15px;
  text-decoration:none;color:#fff;text-align:center
}
.hotline{font-size:1.1rem;font-weight:900;color:var(--gold);font-family:'Cinzel'}

/* Categories */
.cats-wrapper{
  position:sticky;top:48px;z-index:1000;
  background:rgba(8,8,8,.98);
  border-bottom:1px solid #222;height:80px
}
.cats-container{
  display:flex;gap:10px;overflow-x:auto;
  padding:15px;scrollbar-width:none
}
.cat-pill{
  background:#1a1a1a;border:1px solid #333;
  padding:6px 18px;border-radius:50px;
  white-space:nowrap;cursor:pointer
}
.cat-pill.active{background:var(--gold);color:#000;font-weight:900}

/* Products */
.shop-grid{
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:12px;padding:15px
}
.p-card{
  background:var(--card);border-radius:15px;
  overflow:hidden;border:1px solid #1a1a1a;
  display:flex;flex-direction:column
}
.p-card img{
  width:100%;aspect-ratio:1/1;
  object-fit:cover
}
.p-info{
  padding:12px;text-align:center;
  display:flex;flex-direction:column;
  justify-content:space-between;flex-grow:1
}
.add-btn{
  background:var(--gold);color:#000;border:none;
  padding:10px;border-radius:8px;
  font-weight:900;cursor:pointer
}

/* Floating */
#cart-fab,#gift-fab{
  position:fixed;bottom:100px;width:65px;height:65px;
  border-radius:50%;display:flex;
  align-items:center;justify-content:center;
  z-index:2000
}
#cart-fab{right:20px;background:var(--gold)}
#gift-fab{
  left:20px;background:#fff;
  border:3px solid var(--gold)
}
#cart-count{
  position:absolute;top:-2px;right:-2px;
  background:var(--live-red);color:#fff;
  width:24px;height:24px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:12px;font-weight:900
}

/* Drawer & Modal */
.drawer{
  position:fixed;bottom:-100%;left:0;width:100%;
  height:80%;background:#0a0a0a;
  border-top:3px solid var(--gold);
  transition:.4s;z-index:10001;
  padding:25px;border-radius:30px 30px 0 0;
  display:flex;flex-direction:column
}
.drawer.open{bottom:0}
.checkout-btn{
  background:var(--wa);color:#fff;border:none;
  width:100%;padding:20px;border-radius:15px;
  font-weight:900;font-size:1.2rem
}
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.95);
  display:none;align-items:center;justify-content:center;
  z-index:10005;padding:20px
}
.sale-box{
  width:100%;max-width:400px;background:#000;
  border:2px solid var(--gold);
  border-radius:25px;overflow:hidden
}
.timer-box{
  background:var(--gold);color:#000;
  text-align:center;padding:15px;
  font-size:1.8rem;font-weight:900
}
.frag-footer{
  position:fixed;bottom:0;left:0;width:100%;
  background:#111;border-top:2px solid var(--gold);
  padding:15px 20px;display:flex;
  justify-content:space-between;align-items:center;
  z-index:2000
}
</style>
</head>

<body dir="rtl">

<a id="top-wa-btn" class="top-wa-bar" target="_blank">
<i class="fab fa-whatsapp"></i><span id="wa-top-txt"></span>
</a>

<a id="agent-btn" class="agent-button" target="_blank">
<i class="fas fa-handshake"></i><span id="agent-txt"></span>
</a>

<header>
<img src="logo.png" class="logo-img" loading="eager">
<div class="staff-wrapper">
<img src="https://madperfume.ps/upload/01-2026/page/6966930e9af7f.png"
     class="staff-img" loading="lazy">
</div>
<div class="social-bar">
<a href="https://www.facebook.com/MADPARFUMEURISRAEL/"><i class="fab fa-facebook-f"></i></a>
<a href="https://www.instagram.com/perfume.mad/"><i class="fab fa-instagram"></i></a>
<a href="https://www.tiktok.com/@mad.perfume"><i class="fab fa-tiktok"></i></a>
<a href="https://snapchat.com/t/jbtN32Xe"><i class="fab fa-snapchat"></i></a>
<a href="https://www.youtube.com/watch?v=NVCKAp2-6HM"><i class="fab fa-youtube"></i></a>
</div>
<div class="action-grid">
<a href="tel:*9935" class="action-item">
<i class="fas fa-phone-alt"></i>
<div class="hotline">*9935</div>
<small id="txt-cs"></small>
</a>
<a id="wa-corp" class="action-item">
<i class="fab fa-whatsapp"></i>
<div class="hotline" style="font-size:14px">050-978-7730</div>
<small id="txt-wa"></small>
</a>
</div>
</header>

<div class="cats-wrapper"><div id="cats-box" class="cats-container"></div></div>
<main id="main-grid" class="shop-grid"></main>

<div id="cart-fab"><i class="fas fa-shopping-bag" style="color:#000;font-size:1.8rem"></i><div id="cart-count">0</div></div>
<div id="gift-fab"><i class="fas fa-gift" style="color:var(--gold);font-size:1.8rem"></i></div>

<div id="cart-drawer" class="drawer">
<h2 id="cart-title" style="color:var(--gold);text-align:center"></h2>
<div id="cart-list" style="flex-grow:1;overflow-y:auto"></div>
<div id="cart-total" style="text-align:center;font-size:1.6rem;color:var(--gold)"></div>
<button class="checkout-btn" onclick="sendOrder()"><i class="fab fa-whatsapp"></i> <span id="check-btn"></span></button>
</div>

<div id="sale-popup" class="modal-overlay">
<div class="sale-box">
<img src="sale.png" style="width:100%" loading="lazy">
<div id="timer" class="timer-box">00:00:00</div>
<button class="checkout-btn" onclick="claimOffer()"><span id="off-txt"></span></button>
</div>
</div>

<script defer>
/* === Core JS (unchanged logic, optimized) === */
const lang=navigator.language.startsWith('ar')?'ar':'he';
const PHONE="0509787730";
const TXT={ar:{all:'الكل',add:'إضافة للسلة',added:'في السلة',total:'المجموع:',check:'إرسال الطلب عبر واتساب',wa_top:'تواصل معنا مباشرة عبر الواتساب',agent:'هل تريد أن تصبح وكيلاً جديداً لشركة MAD؟ اطلب الآن',agent_msg:'أرغب في الحصول على معلومات عن وكالة لشركة MAD',cs:'خدمة العملاء',wa:'واتساب الشركة',cart:'سلة المشتريات',off:'احصل على العرض'},
he:{all:'הכל',add:'הוסף לסל',added:'בסל',total:'סה"כ:',check:'שליחת הזמנה בוואטסאפ',wa_top:'דברו איתנו עכשיו בווטסאפ',agent:'רוצים להיות סוכנים חדשים של MAD?',agent_msg:'מעוניין בפרטים על סוכנות MAD',cs:'שירות לקוחות',wa:'וואטסאפ חברה',cart:'סל קניות',off:'קבל הטבה'}};
let STATE={products:[],cart:[]};

/* init */
(async()=>{
const r=await fetch('products.csv');const t=await r.text();parseData(t);renderUI();renderCats();renderGrid('all');
setTimeout(()=>toggleSale(true),8000);
})();

/* functions */
function renderUI(){
const t=TXT[lang];
waTop.href=`https://api.whatsapp.com/send/?phone=972${PHONE.substring(1)}`;
waTopTxt.textContent=t.wa_top;
agentBtn.href=`https://api.whatsapp.com/send/?phone=972${PHONE.substring(1)}&text=${encodeURIComponent(t.agent_msg)}`;
agentTxt.textContent=t.agent;
txtCs.textContent=t.cs;txtWa.textContent=t.wa;
cartTitle.textContent=t.cart;checkBtn.textContent=t.check;offTxt.textContent=t.off;
}
function parseData(text){
const l=text.split('\n'),catIdx=lang==='ar'?11:10;
for(let i=1;i<l.length;i++){
const c=l[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
if(!c[0])continue;
STATE.products.push({id:i,title:c[0].replace(/"/g,'').trim(),img:c[3]||'logo.png',price:+c[9]?.replace(/[^\d.]/g,''),priceStr:(c[9]||'')+' ₪',cat:c[catIdx]||''});
}}
function renderCats(){
const cats=[...new Set(STATE.products.map(p=>p.cat))].filter(Boolean);
catsBox.innerHTML=[TXT[lang].all,...cats].map(c=>`<div class="cat-pill ${c===TXT[lang].all?'active':''}" onclick="filterCats(this,'${c}')">${c}</div>`).join('');
}
function filterCats(el,n){document.querySelectorAll('.cat-pill').forEach(p=>p.classList.remove('active'));el.classList.add('active');renderGrid(n===TXT[lang].all?'all':n);}
function renderGrid(f){
mainGrid.innerHTML='';
const list=f==='all'?STATE.products:STATE.products.filter(p=>p.cat===f);
list.forEach(p=>{
mainGrid.innerHTML+=`
<div class="p-card">
<img src="${p.img}" loading="lazy">
<div class="p-info">
<div>
<div style="font-size:.85rem;font-weight:700;height:2.4em;overflow:hidden">${p.title}</div>
<div style="color:var(--gold);font-weight:900;margin:10px 0">${p.priceStr}</div>
</div>
<button class="add-btn" onclick="addToCart(${p.id},this)">${TXT[lang].add}</button>
</div></div>`;
});
}
function addToCart(id,btn){
if(STATE.cart.some(i=>i.id===id))return;
STATE.cart.push(STATE.products.find(x=>x.id===id));
btn.textContent=TXT[lang].added;updateCartUI();
}
function updateCartUI(){
cartCount.textContent=STATE.cart.length;
cartList.innerHTML='';let total=0;
STATE.cart.forEach(i=>{total+=i.price;cartList.innerHTML+=`<div>${i.title} - ${i.priceStr}</div>`});
cartTotal.textContent=`${TXT[lang].total} ${total} ₪`;
}
function toggleSale(s){salePopup.style.display=s?'flex':'none';}
function sendOrder(){
let m='';STATE.cart.forEach((i,n)=>m+=`${n+1}. ${i.title}\n`);
window.open(`https://api.whatsapp.com/send/?phone=972${PHONE.substring(1)}&text=${encodeURIComponent(m)}`,'_blank');
}
function claimOffer(){window.open(`https://api.whatsapp.com/send/?phone=972${PHONE.substring(1)}`,'_blank');}
</script>

<!-- Pixels AFTER LOAD -->
<script>
window.addEventListener('load',()=>{
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];
t=b.createElement(e);t.async=!0;t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)
}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','1072283127290819');fbq('track','PageView');

!function(w,d){
var s=d.createElement('script');
s.async=true;s.src='https://analytics.tiktok.com/i18n/pixel/events.js?sdkid=D2D02JBC77U4ENLN9SBG';
d.body.appendChild(s);
}(window,document);
});
</script>

</body>
</html>
