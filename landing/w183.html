<!DOCTYPE html>
<html x-data="app()" x-init="init()" lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAD Exclusive Offer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { background: #9e693d; font-family: 'Cairo', sans-serif; }
        .mad-input { width: 100%; padding: 15px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; font-weight: 700; margin-bottom: 10px; }
        .btn-order { background: #000; color: #fff; width: 100%; padding: 20px; border-radius: 16px; font-weight: 900; font-size: 1.2rem; }
    </style>
</head>
<body class="pb-20">
    <nav class="p-4 flex justify-center bg-white/40 backdrop-blur sticky top-0 z-50">
        <img src="https://www.mad-parfumeur.com/assets/hero/logo.webp" class="h-10 object-contain">
    </nav>
    
    <header class="text-center py-10 px-4">
        <h1 class="text-3xl font-black text-white drop-shadow-md" x-text="lang==='he' ? '×”×ž×‘×¦×¢×™× ×”×‘×œ×¢×“×™×™×' : 'Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­ØµØ±ÙŠØ©'"></h1>
    </header>

    <main class="max-w-md mx-auto px-4 space-y-6">
        <img src="https://www.mad-parfumeur.com/assets/hero/4.webp" class="rounded-2xl shadow-xl w-full">

        <div class="bg-white rounded-[28px] p-8 shadow-2xl text-right border-4 border-white/20">
            <h2 class="text-2xl font-black text-center mb-6" x-text="lang==='he'?'×”×–×ž× ×” ×ž×”×™×¨×”':'Ø·Ù„Ø¨ Ø³Ø±ÙŠØ¹'"></h2>
            <form @submit.prevent="submitForm">
                <input type="text" x-model="f.name" class="mad-input" :placeholder="lang==='he'?'×©× ×ž×œ×':'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„'" required>
                <input type="tel" x-model="f.phone" class="mad-input" :placeholder="lang==='he'?'×˜×œ×¤×•×Ÿ':'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'" required>
                <input type="text" x-model="f.address" class="mad-input" :placeholder="lang==='he'?'×›×ª×•×‘×ª':'Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø¯ÙŠÙ†Ø©'" required>
                
                <div class="flex gap-2 mb-4">
                    <label class="flex-1 bg-gray-50 p-4 rounded-xl text-center border cursor-pointer font-bold">
                        <input type="radio" x-model="f.payment" value="Cash" class="hidden">
                        <span x-text="lang==='he'?'×ž×–×•×ž×Ÿ':'Ù†Ù‚Ø¯'"></span>
                    </label>
                    <label class="flex-1 bg-gray-50 p-4 rounded-xl text-center border cursor-pointer font-bold">
                        <input type="radio" x-model="f.payment" value="Visa" class="hidden">
                        <span x-text="lang==='he'?'××©×¨××™':'ÙÙŠØ²Ø§'"></span>
                    </label>
                </div>

                <button type="submit" class="btn-order" :disabled="loading" x-text="loading ? '...' : (lang==='he'?'××©×¨ ×”×–×ž× ×”':'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†')"></button>
            </form>
        </div>
    </main>

    <div x-show="submitted" class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-6 text-center" style="display:none">
        <div class="bg-white rounded-3xl p-10 max-w-xs">
            <div class="text-5xl mb-4">âœ…</div>
            <h3 class="text-2xl font-black mb-2">ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!</h3>
            <p class="text-gray-500 font-bold">Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
            <button @click="submitted=false" class="mt-6 w-full bg-black text-white py-3 rounded-xl font-bold">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        function app() {
            return {
                lang: 'ar', loading: false, submitted: false,
                // ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ù†Ø§ ðŸ‘‡
                sheetUrl: 'https://script.google.com/macros/s/AKfycbyhADWogUztVW-u56c2RXvgP2NId-0Yfl2sHMkm_wQZXDOV3MaJJLSEiOU7ttPkJm5H/exec', 
                f: { name:'', phone:'', address:'', payment:'Cash', process:'Direct' },
                
                init() { this.lang = (navigator.language.startsWith('he') ? 'he' : 'ar'); },
                
                async submitForm() {
                    if(this.loading) return;
                    this.loading = true;

                    const fd = new FormData();
                    Object.keys(this.f).forEach(k => fd.append(k, this.f[k]));
                    fd.append('offer', 'MAD-Exclusive-w183');
                    fd.append('lang', this.lang);
                    
                    // ==============================
                    // âœ… Ù‡Ù†Ø§ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø³Ø¹Ø± ÙŠØ¯ÙˆÙŠØ§Ù‹
                    // ==============================
                    fd.append('price', '150'); 

                    try {
                        // Ø¨ÙŠÙƒØ³Ù„
                        if(window.fbq) fbq('track', 'Purchase', {value: 150, currency: 'ILS'});
                        
                        // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø´ÙŠØª
                        await fetch(this.sheetUrl, { method: 'POST', body: fd, mode: 'no-cors' });
                        this.submitted = true;
                        this.f = { name:'', phone:'', address:'', payment:'Cash', process:'Direct' };
                    } catch(e) { 
                        alert('Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'); 
                    } finally { 
                        this.loading = false; 
                    }
                }
            }
        }
    </script>
</body>
</html>
