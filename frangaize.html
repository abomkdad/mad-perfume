<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>MAD PARFUMEUR | Franchise Portal</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&family=Cinzel:wght@600;700;900&family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --primary:#C9A24D;
      --primary-gradient:linear-gradient(135deg,#C9A24D,#F5D27A);
      --bg:#0B0B0B;
      --border-gold:rgba(201,162,77,.6);
      --glass:rgba(20,20,20,.7);
    }
    body{background:var(--bg);color:#fff;font-family:'Assistant','Cairo',sans-serif;margin:0;scroll-behavior:smooth}
    h1,h2,h3,.font-cinzel{font-family:'Cinzel',serif}
    .gold-gradient-text{background:var(--primary-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .hero-video-container{position:relative;height:90vh;width:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;text-align:center}
    .hero-video{position:absolute;top:50%;left:50%;min-width:100%;min-height:100%;transform:translate(-50%,-50%);z-index:-1;object-fit:cover}
    .hero-overlay{position:absolute;inset:0;background:rgba(0,0,0,.65);z-index:0}
    .glass-card{background:var(--glass);backdrop-filter:blur(12px);border:1px solid var(--border-gold);border-radius:18px;transition:all .4s ease}
    .glass-card:hover{box-shadow:0 15px 40px rgba(201,162,77,.2);transform:translateY(-8px)}
    .stat-divider{height:50px;width:1px;background:rgba(201,162,77,.3)}
    .btn-gold{background:var(--primary-gradient);color:#000;font-weight:800;border-radius:12px;transition:all .3s}
    .btn-gold:hover{transform:scale(1.05);box-shadow:0 0 20px rgba(201,162,77,.4)}
    .lang-switch{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);padding:5px 15px;border-radius:50px;font-size:12px;font-weight:bold;cursor:pointer}
    .lang-switch.active{background:var(--primary);color:#000}
    .form-wrap{width:100%;max-width:900px;margin:0 auto;border-radius:20px;overflow:hidden;border:1px solid var(--border-gold);
      box-shadow:0 20px 60px rgba(0,0,0,.8);background:rgba(10,10,10,.85);backdrop-filter:blur(14px)}
    .f-label{color:rgba(255,255,255,.85);font-size:13px;margin-bottom:6px;display:block}
    .f-input,.f-select,.f-textarea{width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(201,162,77,.35);
      color:#fff;border-radius:12px;padding:12px 14px;outline:none;transition:.2s}
    .f-input:focus,.f-select:focus,.f-textarea:focus{border-color:rgba(201,162,77,.9);box-shadow:0 0 0 3px rgba(201,162,77,.15)}
    .hint{color:rgba(255,255,255,.55);font-size:12px;margin-top:6px}
    .toast{border:1px solid rgba(201,162,77,.35);background:rgba(0,0,0,.5);border-radius:14px;padding:14px;color:#fff}
  </style>
</head>

<body>
  <!-- Top Navigation -->
  <nav class="fixed top-0 w-full z-[100] px-6 py-4 flex justify-between items-center bg-black/40 backdrop-blur-lg border-b border-white/5">
    <div class="flex items-center gap-4">
      <img src="https://abomkdad.github.io/Digital-Business-Card/logo.png" alt="MAD Logo" class="h-10 md:h-12">
      <div class="hidden md:block font-cinzel text-xs tracking-widest text-[#C9A24D]">FRANCHISE PORTAL</div>
    </div>
    <div class="flex gap-2">
      <button onclick="setLanguage('ar')" id="btn-ar" class="lang-switch">AR</button>
      <button onclick="setLanguage('he')" id="btn-he" class="lang-switch">HE</button>
      <button onclick="setLanguage('en')" id="btn-en" class="lang-switch">EN</button>
    </div>
  </nav>

  <!-- Hero Section -->
  <header class="hero-video-container">
    <div class="hero-overlay"></div>
    <video autoplay muted loop playsinline class="hero-video">
      <source src="https://assets.mixkit.co/videos/preview/mixkit-perfume-bottle-and-flower-petals-40150-large.mp4" type="video/mp4">
    </video>

    <div class="relative z-10 px-6 max-w-5xl mx-auto">
      <h1 id="hero-headline" class="text-4xl md:text-7xl font-black mb-8 gold-gradient-text leading-tight uppercase">
        فرصة استثمار حصرية في عالم العطور الفاخرة
      </h1>
      <p id="hero-subtitle" class="text-lg md:text-2xl text-zinc-300 font-light mb-12 max-w-3xl mx-auto">
        ابنِ مشروعك التجاري مع علامة عالمية مثبتة النجاح
      </p>
      <a href="#form-section" class="btn-gold px-14 py-5 uppercase text-sm tracking-widest inline-block">
        <span id="hero-cta">تقديم طلب تقييم الامتياز</span>
      </a>
    </div>
  </header>

  <!-- Stats Bar -->
  <section class="py-16 bg-zinc-950 border-y border-white/5">
    <div class="max-w-6xl mx-auto flex justify-around items-center px-6">
      <div class="text-center">
        <div class="text-3xl md:text-5xl font-cinzel gold-gradient-text font-black">250+</div>
        <div class="text-[10px] md:text-xs text-zinc-500 uppercase tracking-widest mt-2" id="stat-1">Branches</div>
      </div>
      <div class="stat-divider"></div>
      <div class="text-center">
        <div class="text-3xl md:text-5xl font-cinzel gold-gradient-text font-black">20+</div>
        <div class="text-[10px] md:text-xs text-zinc-500 uppercase tracking-widest mt-2" id="stat-2">Countries</div>
      </div>
      <div class="stat-divider"></div>
      <div class="text-center">
        <div class="text-3xl md:text-5xl font-cinzel gold-gradient-text font-black">25+</div>
        <div class="text-[10px] md:text-xs text-zinc-500 uppercase tracking-widest mt-2" id="stat-3">Years Exp</div>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section id="form-section" class="py-28 px-6 bg-zinc-950 border-t border-white/5">
    <div class="max-w-5xl mx-auto text-center">
      <h2 id="section-form-title" class="text-4xl font-black mb-4 gold-gradient-text uppercase">تقييم أهلية الامتياز</h2>
      <p id="section-form-sub" class="text-zinc-500 mb-12 max-w-2xl mx-auto">
        يرجى تعبئة كافة البيانات بدقة ليتسنى لفريقنا مراجعة طلبكم والرد عليه خلال 48 ساعة.
      </p>

      <div class="form-wrap p-6 md:p-10 text-start">
        <form id="franchiseForm" class="grid grid-cols-1 md:grid-cols-2 gap-6" autocomplete="on">
          <div>
            <label class="f-label" id="f-name-label">الاسم الكامل *</label>
            <input class="f-input" id="f_name" name="name" required maxlength="80" placeholder="محمد جلبوني" />
          </div>

          <div>
            <label class="f-label" id="f-phone-label">رقم الهاتف (واتساب) *</label>
            <input class="f-input" id="f_phone" name="phone" required inputmode="tel" placeholder="0501234567" />
            <div class="hint" id="f-phone-hint">اكتب الرقم بدون رموز. سيتم تصحيحه تلقائيًا (972/970).</div>
          </div>

          <div>
            <label class="f-label" id="f-city-label">المدينة / المنطقة *</label>
            <input class="f-input" id="f_city" name="city" required maxlength="80" placeholder="חיפה / תל אביב / ירושלים" />
          </div>

          <div>
            <label class="f-label" id="f-address-label">العنوان (اختياري)</label>
            <input class="f-input" id="f_address" name="address" maxlength="120" placeholder="شارع - رقم - تفاصيل" />
          </div>

          <div>
            <label class="f-label" id="f-email-label">البريد الإلكتروني (اختياري)</label>
            <input class="f-input" id="f_email" name="email" type="email" maxlength="120" placeholder="name@email.com" />
          </div>

          <div>
            <label class="f-label" id="f-exp-label">هل لديك خبرة سابقة؟ *</label>
            <select class="f-select" id="f_exp" name="experience" required>
              <option value="" selected disabled>اختر</option>
              <option value="yes_sales">نعم — مبيعات</option>
              <option value="yes_marketing">نعم — تسويق</option>
              <option value="yes_distribution">نعم — توزيع/شبكة</option>
              <option value="no">لا — ولكن جاهز للبدء</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label class="f-label" id="f-source-label">كيف وصلتنا؟ (اختياري)</label>
            <select class="f-select" id="f_source" name="source">
              <option value="" selected>اختر</option>
              <option value="instagram">Instagram</option>
              <option value="tiktok">TikTok</option>
              <option value="facebook">Facebook</option>
              <option value="referral">Recommendation</option>
              <option value="branch">Visited Branch</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="md:col-span-2">
            <label class="f-label" id="f-notes-label">ملاحظات (اختياري)</label>
            <textarea class="f-textarea" id="f_notes" name="notes" rows="4" maxlength="800" placeholder="اكتب أي تفاصيل تساعد فريقنا..."></textarea>
          </div>

          <div class="md:col-span-2 flex flex-col md:flex-row gap-4 items-center justify-between">
            <div class="hint" id="f-legal">بالضغط على إرسال أنت توافق على استخدام البيانات للتواصل وتقييم الطلب فقط.</div>
            <button type="submit" id="submitBtn" class="btn-gold px-10 py-4 uppercase text-sm tracking-widest w-full md:w-auto">
              <span id="submitText">إرسال الطلب</span>
            </button>
          </div>

          <div class="md:col-span-2 hidden" id="formToastWrap">
            <div class="toast" id="formToast"></div>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-16 px-6 border-t border-white/5 text-center text-zinc-600">
    <div class="max-w-4xl mx-auto">
      <p id="footer-legal" class="text-[10px] uppercase tracking-widest mb-3">Submitting this form does not guarantee approval. All applications are reviewed manually.</p>
      <p id="footer-privacy" class="text-[10px] mb-8">Your data is protected and will only be used for franchise evaluation purposes.</p>
      <div class="font-cinzel text-xl gold-gradient-text font-black">MAD PARFUMEUR GLOBAL</div>
    </div>
  </footer>

  <script>
    /***********************
     * CONFIG ✅
     ***********************/
    const CONFIG = {
      WEBHOOK_URL: "https://script.google.com/macros/s/AKfycbzKCONGEVp7DbuP2mBata9Rvyv3OK7-CPDoCT9dOhjRlcrrs05wudzk2nXNBhb8162l/exec",
      CUSTOMER_SERVICE: "*9935"
    };

    function toast(msg, ok = true) {
      const wrap = document.getElementById('formToastWrap');
      const box = document.getElementById('formToast');
      wrap.classList.remove('hidden');
      box.style.borderColor = ok ? "rgba(22,163,74,0.55)" : "rgba(220,38,38,0.65)";
      box.innerHTML = msg;
    }

    function normalizePhone(input) {
      let d = String(input || "").replace(/[^0-9]/g, "");
      if (!d) return { ok: false, phone: "" };

      if (d.startsWith("00")) d = d.slice(2);
      if (d.startsWith("9720")) d = "972" + d.slice(4);

      if (d.startsWith("0")) {
        if (d.startsWith("059") && d.length >= 10) d = "970" + d.slice(1);
        else if (d.startsWith("05") && d.length >= 10) d = "972" + d.slice(1);
        else if (d.length >= 9) d = "972" + d.slice(1);
      }

      if (d.length === 9 && d.startsWith("5")) d = "972" + d;
      if (d.length === 9 && d.startsWith("59")) d = "970" + d;

      const ok = (d.startsWith("972") || d.startsWith("970")) && d.length === 12;
      return { ok, phone: d };
    }

    /***********************
     * Translations (short)
     ***********************/
    const translations = {
      ar: {
        dir: 'rtl', lang: 'ar',
        hero_headline: "فرصة استثمار حصرية في عالم العطور الفاخرة",
        hero_subtitle: "ابنِ مشروعك التجاري مع علامة عالمية مثبتة النجاح",
        hero_cta: "تقديم طلب تقييم الامتياز",
        stats: ["فروع", "دول", "سنة خبرة"],
        form_title: "تقييم أهلية الامتياز",
        form_sub: "يرجى تعبئة كافة البيانات بدقة ليتسنى لفريقنا مراجعة طلبكم والرد عليه خلال 48 ساعة.",
        footer_legal: "إرسال هذا النموذج لا يضمن الموافقة. جميع الطلبات تتم مراجعتها يدوياً.",
        footer_privacy: "بياناتك محمية وسيتم استخدامها فقط لأغراض تقييم الامتياز.",
        f_name: "الاسم الكامل *",
        f_phone: "رقم الهاتف (واتساب) *",
        f_city: "المدينة / المنطقة *",
        f_address: "العنوان (اختياري)",
        f_email: "البريد الإلكتروني (اختياري)",
        f_exp: "هل لديك خبرة سابقة؟ *",
        f_source: "كيف وصلتنا؟ (اختياري)",
        f_notes: "ملاحظات (اختياري)",
        f_phone_hint: "اكتب الرقم بدون رموز. سيتم تصحيحه تلقائيًا (972/970).",
        f_legal: "بالضغط على إرسال أنت توافق على استخدام البيانات للتواصل وتقييم الطلب فقط.",
        submit: "إرسال الطلب"
      },
      he: {
        dir: 'rtl', lang: 'he',
        hero_headline: "הזדמנות השקעה יוקרתית בעולם הבישום",
        hero_subtitle: "בנה עסק מצליח עם מותג בינלאומי מוביל",
        hero_cta: "הגשת בקשת זכיינות",
        stats: ["סניפים", "מדינות", "שנות ניסיון"],
        form_title: "הערכת התאמה לזכיינות",
        form_sub: "אנא מלא/י את כל הפרטים בדייקנות כדי שנוכל לבחון את בקשתך.",
        footer_legal: "הגשת טופס זה אינה מבטיחה אישור. כל הבקשות נבדקות ידנית.",
        footer_privacy: "הנתונים שלך מוגנים וישמשו אך ורק לצורך הערכת הזכיינות.",
        f_name: "שם מלא *",
        f_phone: "טלפון (וואטסאפ) *",
        f_city: "עיר / אזור *",
        f_address: "כתובת (אופציונלי)",
        f_email: "דוא\"ל (אופציונלי)",
        f_exp: "האם יש ניסיון קודם? *",
        f_source: "איך הגעת אלינו? (אופציונלי)",
        f_notes: "הערות (אופציונלי)",
        f_phone_hint: "הקלד/י מספר ללא סימנים. המערכת תסדר אוטומטית (972/970).",
        f_legal: "בלחיצה על שליחה, אני מאשר/ת שימוש בפרטים לצורך יצירת קשר והערכת הבקשה בלבד.",
        submit: "שליחת בקשה"
      },
      en: {
        dir: 'ltr', lang: 'en',
        hero_headline: "Luxury Perfume Franchise Investment",
        hero_subtitle: "Build your business with a proven global brand",
        hero_cta: "Apply For Evaluation",
        stats: ["Branches", "Countries", "Years Exp"],
        form_title: "Franchise Evaluation",
        form_sub: "Please fill in all details accurately for our review.",
        footer_legal: "Submitting this form does not guarantee approval.",
        footer_privacy: "Data used for evaluation purposes only.",
        f_name: "Full name *",
        f_phone: "Phone (WhatsApp) *",
        f_city: "City / Area *",
        f_address: "Address (optional)",
        f_email: "Email (optional)",
        f_exp: "Do you have prior experience? *",
        f_source: "How did you hear about us? (optional)",
        f_notes: "Notes (optional)",
        f_phone_hint: "Enter digits only. We'll auto-normalize (972/970).",
        f_legal: "By submitting, you agree to be contacted for evaluation purposes only.",
        submit: "Submit"
      }
    };

    function setLanguage(lang) {
      const t = translations[lang];
      document.documentElement.lang = t.lang;
      document.documentElement.dir = t.dir;

      document.getElementById('hero-headline').textContent = t.hero_headline;
      document.getElementById('hero-subtitle').textContent = t.hero_subtitle;
      document.getElementById('hero-cta').textContent = t.hero_cta;

      document.getElementById('stat-1').textContent = t.stats[0];
      document.getElementById('stat-2').textContent = t.stats[1];
      document.getElementById('stat-3').textContent = t.stats[2];

      document.getElementById('section-form-title').textContent = t.form_title;
      document.getElementById('section-form-sub').textContent = t.form_sub;
      document.getElementById('footer-legal').textContent = t.footer_legal;
      document.getElementById('footer-privacy').textContent = t.footer_privacy;

      document.getElementById('f-name-label').textContent = t.f_name;
      document.getElementById('f-phone-label').textContent = t.f_phone;
      document.getElementById('f-city-label').textContent = t.f_city;
      document.getElementById('f-address-label').textContent = t.f_address;
      document.getElementById('f-email-label').textContent = t.f_email;
      document.getElementById('f-exp-label').textContent = t.f_exp;
      document.getElementById('f-source-label').textContent = t.f_source;
      document.getElementById('f-notes-label').textContent = t.f_notes;
      document.getElementById('f-phone-hint').textContent = t.f_phone_hint;
      document.getElementById('f-legal').textContent = t.f_legal;
      document.getElementById('submitText').textContent = t.submit;

      document.querySelectorAll('.lang-switch').forEach(b => b.classList.remove('active'));
      document.getElementById(`btn-${lang}`).classList.add('active');
    }

    const initLang = navigator.language.startsWith('he') ? 'he' : (navigator.language.startsWith('ar') ? 'ar' : 'en');
    setLanguage(initLang);

    /***********************
     * SUBMIT -> WEBHOOK ✅ (NO CORS FAIL)
     ***********************/
    document.getElementById('franchiseForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const btn = document.getElementById('submitBtn');
      btn.disabled = true;
      btn.style.opacity = "0.7";

      const name = document.getElementById('f_name').value.trim();
      const rawPhone = document.getElementById('f_phone').value.trim();
      const city = document.getElementById('f_city').value.trim();
      const address = document.getElementById('f_address').value.trim();
      const email = document.getElementById('f_email').value.trim();
      const experience = document.getElementById('f_exp').value;
      const source = document.getElementById('f_source').value;
      const notes = document.getElementById('f_notes').value.trim();

      const np = normalizePhone(rawPhone);
      if (!np.ok) {
        toast("❌ رقم الهاتف غير صحيح. اكتب رقم 05x... أو 059... وسيتم تصحيحه تلقائيًا.", false);
        btn.disabled = false;
        btn.style.opacity = "1";
        return;
      }

      // ✅ payload (sent as form-urlencoded to avoid preflight)
      const payload = {
        name,
        phone: np.phone,
        city,
        address,
        email,
        experience,
        source,
        notes,
        page_lang: document.documentElement.lang || initLang,
        created_at: new Date().toISOString()
      };

      try {
        const body = new URLSearchParams(payload).toString();

        await fetch(CONFIG.WEBHOOK_URL, {
          method: "POST",
          mode: "no-cors",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8"
          },
          body
        });

        toast(`✅ تم إرسال طلبك بنجاح. سيتم التواصل معك قريبًا.<br><div class="hint">للاستفسار: ${CONFIG.CUSTOMER_SERVICE}</div>`, true);
        e.target.reset();

      } catch (err) {
        toast(`❌ خطأ بالشبكة أو بالويبهوك: ${String(err)}`, false);
      } finally {
        btn.disabled = false;
        btn.style.opacity = "1";
      }
    });
  </script>
</body>
</html>
